"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[419],{1036:(e,t,a)=>{a.d(t,{A:()=>N});var s=a(9324),r=a(4959),n=a(9950),i=a(6250),o=a(1032),c=a(4194),l=a(8429),d=a(2074),u=a(5996),h=a(4967),m=a(4159),x=a.n(m),p=a(8553),g=a(3571),v=a(8091),j=a(300),f=a(4643),w=a(4414);const y=e=>{let{name:t,slug:a,time:m,questionCount:y=0,accessCount:N=0,examCount:b=0,imageSrc:A,id:C,onDelete:z=!1,isFavorite:E=!1}=e;const q=(0,l.Zp)(),S=(0,j.wA)(),k=(0,j.d4)((e=>e.user)),Y=(0,v.A)((e=>g.a2(e)));return(0,n.useEffect)((()=>{Y.isSuccess&&Y.reset()}),[Y.isSuccess]),E=k.favoriteQuiz.some((e=>e.slug===a)),(0,w.jsxs)("div",{className:"shrink-0 max-w-80 transition-all duration-300 shadow-lg rounded hover:shadow-2xl",children:[(0,w.jsx)("div",{onClick:()=>q(`${u.HR.reviewQuiz}/${a}`),className:"w-full h-52 flex justify-center content-center hover:cursor-pointer",children:(0,w.jsx)(c.A,{src:A,alt:t,placeholder:(0,w.jsx)(i.A,{color:o.Tj.primary})})}),(0,w.jsxs)("div",{className:"px-2 py-3",children:[(0,w.jsx)("p",{className:"font-bold text-base line-clamp-2",children:t}),m&&(0,w.jsxs)("div",{className:"flex items-center gap-1",children:[(0,w.jsx)(r.g,{className:"text-orange-900",icon:s.APe}),(0,w.jsx)("p",{className:"text-gray-700",children:x()(m).format("DD/MM/YYYY")})]}),(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("div",{className:"text-base flex gap-3",children:[(0,w.jsxs)(h.A,{trigger:"hover",content:"C\xe2u h\u1ecfi",children:[(0,w.jsx)(r.g,{icon:s.APe,className:"mr-1 text-yellow-500"}),(0,w.jsx)("span",{className:"text-gray-700",children:null!==y&&void 0!==y?y:0})]}),(0,w.jsxs)(h.A,{trigger:"hover",content:"L\u01b0\u1ee3t truy c\u1eadp",children:[(0,w.jsx)(r.g,{icon:s.s67,className:"mr-1 text-blue-500"}),(0,w.jsx)("span",{className:"text-gray-700",children:null!==N&&void 0!==N?N:0})]}),(0,w.jsxs)(h.A,{trigger:"hover",content:"S\u1ed1 l\u01b0\u1ee3t thi",children:[(0,w.jsx)(r.g,{icon:s.yjc,className:"mr-1 text-green-500"}),(0,w.jsx)("span",{className:"text-gray-700",children:null!==b&&void 0!==b?b:0})]})]})})]}),z&&(0,w.jsx)("div",{className:"px-2 py-2 border-t-2",children:(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsx)("div",{className:"text-base flex gap-3",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.A,{trigger:"hover",content:"Xem chi ti\u1ebft",children:(0,w.jsx)("button",{onClick:()=>q(`${u.tX.myQuiz}/${C}`),children:(0,w.jsx)(r.g,{icon:s.pS3,className:"pr-1 text-[#f27735]"})})}),(0,w.jsx)(h.A,{trigger:"hover",content:"Ch\u1ec9nh s\u1eeda \u0111\u1ec1 thi",children:(0,w.jsx)("button",{onClick:()=>q(`${u.tX.myQuiz}/chinh-sua/${C}`),children:(0,w.jsx)(r.g,{icon:s.MT7,className:"pr-1 text-[#851e3f]"})})}),(0,w.jsx)(h.A,{trigger:"hover",content:"X\xf3a \u0111\u1ec1 thi",children:(0,w.jsx)("button",{onClick:z,children:(0,w.jsx)(r.g,{icon:s.sjs,className:"pr-1 text-red-500"})})})]})})})}),(0,w.jsxs)("div",{className:"px-3 py-3 border-t-2 flex justify-between",children:[(0,w.jsxs)(d.N_,{to:`${u.HR.reviewQuiz}/${a}`,className:"inline-block rounded border hover:text-white hover:opacity-80 ease-linear transition-all duration-200 text-white bg-gradient-to-r from-primary to-[#1e998c] px-2 py-2",children:[(0,w.jsx)(r.g,{icon:s.e74,className:"pr-1"}),"V\xe0o \xf4n thi"]}),(0,w.jsx)("button",{onClick:()=>((e,t)=>{e&&(Y.mutate({id:e}),S((0,f.a2)({slug:t})))})(C,a),children:(0,w.jsx)(r.g,{className:"text-red-500 text-2xl",icon:E?s.qcK:p.qcK})})]})]})},N=(0,n.memo)(y)},9419:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(9324),r=a(4959),n=a(9950),i=a(1036);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[a,s]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const a=setTimeout((()=>{s(e)}),t);return()=>clearTimeout(a)}),[e]),a};var c=a(8091),l=a(9519),d=a(62),u=a(5448),h=a(7713),m=a(1759),x=a(1032),p=a(4414);const g=(0,n.createContext)(),v={2e3:"2000"},j=(new Date).getFullYear();v[j]=j;const f=e=>{let{children:t}=e;const[a,s]=(0,n.useState)({}),[r,i]=(0,n.useState)(""),[o,c]=(0,n.useState)([2e3,j]),[l,d]=(0,n.useState)([]);return(0,p.jsx)(g.Provider,{value:{quizzes:a,setQuizzes:s,searchName:r,setSearchName:i,schoolYear:o,setSchoolYear:c,educationLevel:l,setEducationLevel:d},children:t})},w=()=>{const{setQuizzes:e,searchName:t,schoolYear:a,setSchoolYear:i,educationLevel:d,setEducationLevel:m}=(0,n.useContext)(g),f=(0,c.A)((e=>l.Wk(e))),w=o(a);(0,n.useEffect)((()=>{2===w.length&&f.mutate({schoolYear:w,name:t,educationLevel:d})}),[w]);const y=o(d);return(0,n.useEffect)((()=>{Array.isArray(y)&&f.mutate({schoolYear:a,name:t,educationLevel:y})}),[y]),(0,n.useEffect)((()=>{var t;e(null!==(t=f.data)&&void 0!==t?t:[])}),[f.data]),(0,p.jsxs)("aside",{className:"z-10 bg-white w-56 shadow-lg hidden md:block rounded py-5",children:[(0,p.jsx)("div",{children:(0,p.jsx)(r.g,{icon:s.mRM,className:"ml-4 text-orange-300 text-xl"})}),(0,p.jsxs)("div",{className:"flex flex-col mx-4 mt-3 text-[#333]",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)(r.g,{icon:s.l6G})," N\u0103m h\u1ecdc"]}),(0,p.jsx)(u.A,{value:a,range:!0,marks:v,defaultValue:a,onChange:e=>i(e),min:2e3,max:j})]}),(0,p.jsxs)("div",{className:"flex flex-col mx-4 mt-3 text-[#333]",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)(r.g,{icon:s.y_4})," Tr\xecnh \u0111\u1ed9"]}),(0,p.jsx)(h.A,{className:"mt-2",mode:"multiple",allowClear:!0,placeholder:"Ch\u1ecdn tr\xecnh \u0111\u1ed9",value:d,onChange:e=>m(e),children:null===x.Wv||void 0===x.Wv?void 0:x.Wv.map(((e,t)=>(0,p.jsx)(h.A.Option,{value:e,children:e},t)))})]})]})},y=()=>{var e,t;const{quizzes:a,setQuizzes:u,searchName:h,setSearchName:v,schoolYear:j}=(0,n.useContext)(g),f=o(h),w=(0,c.A)((e=>l.Wk(e)));(0,n.useEffect)((()=>{f.trim()&&w.mutate({name:f,schoolYear:j})}),[f]),(0,n.useEffect)((()=>{var e;u(null!==(e=w.data)&&void 0!==e?e:[])}),[w.data]),(0,n.useEffect)((()=>{w.mutate({skip:0,limit:x.md})}),[]);return(0,p.jsxs)("section",{className:"rounded-lg px-3 py-4 flex-1 bg-white shadow-xl",children:[w.isPending?(0,p.jsx)(d.A,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,p.jsxs)("div",{className:"flex items-center rounded-md px-2 py-1 border border-gray-400 text-gray-700 focus-within:border-primary focus-within:shadow",children:[(0,p.jsx)(r.g,{icon:s.MjD,className:"text-gray-700"}),(0,p.jsx)("input",{value:h,onChange:e=>v(e.target.value),className:"min-w-52 ml-2 outline-none caret-primary",placeholder:"Nh\u1eadp t\u1eeb kh\xf3a t\xecm ki\u1ebfm"})]}),(0,p.jsx)("div",{children:(0,p.jsxs)("p",{className:"text-[#333]",children:["S\u1ed1 \u0111\u1ec1 thi: ",(0,p.jsx)("span",{className:"font-bold ",children:null===a||void 0===a?void 0:a.total})]})})]}),(0,p.jsx)("div",{className:"grid w-full grid-cols-2 gap-4 px-0 py-10 sm:grid-cols-3 md:grid-cols-4  2xl:grid-cols-5",children:(null===a||void 0===a||null===(e=a.quizzes)||void 0===e?void 0:e.length)>0&&(0,p.jsx)(p.Fragment,{children:null===a||void 0===a||null===(t=a.quizzes)||void 0===t?void 0:t.map(((e,t)=>(0,p.jsx)(i.A,{name:e.name,accessCount:e.accessCount,examCount:e.examCount,imageSrc:e.thumb,id:e._id,slug:e.slug,questionCount:e.questionCount},t)))})})]}),(0,p.jsx)(m.A,{align:"end",onChange:e=>(e=>{w.mutate({skip:e-1,limit:x.md})})(e),defaultCurrent:1,defaultPageSize:x.md,total:(null===a||void 0===a?void 0:a.total)||x.md})]})},N=()=>(0,p.jsx)(f,{children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("h1",{className:"text-xl font-medium text-gray-700 pb-3",children:"Kh\xe1m ph\xe1 \u0111\u1ec1 thi"}),(0,p.jsxs)("div",{className:"flex flex-row space-x-4 items-start",children:[(0,p.jsx)(w,{}),(0,p.jsx)(y,{})]})]})})},9519:(e,t,a)=>{a.d(t,{hG:()=>l,wn:()=>c,hj:()=>x,Wk:()=>p,h3:()=>o,iC:()=>m,mU:()=>h,qY:()=>i,J7:()=>d,z1:()=>u});var s=a(3491),r=a(307);const n=a(9246).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),i=async e=>{try{const a=new URLSearchParams;Object.entries(e).forEach((e=>{let[t,s]=e;void 0!=s&&a.append(t,String(s))}));const s=await r.A.get(`/quiz/mine?${a}`);var t;return 200===s.status&&s.data&&(null!==(t=s.data.data)&&void 0!==t)?t:[]}catch(s){var a;if(console.log(s),s.response)throw new Error(null===(a=s.response)||void 0===a?void 0:a.data)}},o=async e=>{try{const t=await r.A.get(`/quiz/detail?id=${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},c=async e=>{try{const{name:t,description:a,school:s,subject:n,topic:i,schoolYear:o,educationLevel:c,thumb:l}=e,d=await r.A.post("/quiz/create",JSON.stringify({name:t,description:a,school:s,subject:n,topic:i,schoolYear:o,educationLevel:c,thumb:l}));return 200===d.status&&d.data?d.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},l=async e=>{try{const{id:t,partName:a,questionType:s,questionContent:n,answers:i}=e,o=await r.A.put("/quiz/createQuestion",JSON.stringify({id:t,partName:a,questionType:s,questionContent:n,answers:i}));return 200===o.status&&o.data?o.data.data:{}}catch(t){if(t.response)throw s.Ay.error(t.response.data),new Error(t.response.data)}},d=async e=>{try{const t=await r.A.put("/quiz/updateGeneralInfo",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw s.Ay.error(t.response.data),new Error(t.response.data)}},u=async e=>{try{const t=await r.A.put("/quiz/updateQuestion",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:t}catch(t){if(t.response)throw console.log(t.response),new Error(t.response.data)}},h=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await n.get(`/quiz/preview/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},m=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await r.A.get(`/quiz/forExam/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},x=async e=>{try{const{id:t}=e;if(!t)throw new Error("C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh x\xf3a");const a=await r.A.delete(`/quiz/${t}/deleteQuiz`);return 200===a.status&&a.data?a.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},p=async e=>{try{const{name:t,page:a,limit:s,skip:r,subject:i,topic:o,schoolYear:c,educationLevel:l}=e,d=new URLSearchParams;Object.entries({name:t,page:a,limit:s,skip:r,subject:i,topic:o,schoolYear:c,educationLevel:l}).forEach((e=>{let[t,a]=e;void 0!==a&&d.append(t,String(a))}));const u=await n.get(`/quiz/discovery?${d}`);return 200===u.status&&u.data?u.data.data:[]}catch(t){throw new Error(t.response.data)}}}}]);