"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[913],{3913:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var r=t(7086),s=t(3491),l=t(1759),c=t(4159),n=t.n(c),d=t(9950),i=t(8429),o=t(5996),p=t(1032),x=t(8091),u=t(4247),b=t(4414);const m="CHANGE_ACTIVE",h="SET_USER_LIST",y=(e,a)=>{switch(a.type){case h:return a.payload.users?a.payload.users:e;case m:{const t=[...e];return a.payload.id?(t.forEach((e=>{e._id==a.payload.id&&(e.isActive=!e.isActive)})),t):e}default:return e}},f=()=>{const e=(0,i.Zp)(),[a,t]=(0,d.useReducer)(y,[]),[c,f]=(0,d.useState)(0),g=(0,r.I)({queryKey:["userListQuery"],queryFn:()=>u.aU({})}),j=(0,x.A)((e=>u.aU(e)));(0,d.useEffect)((()=>{var e,a;g.data?(f(null===(e=g.data)||void 0===e?void 0:e.total),t({type:h,payload:{users:null===(a=g.data)||void 0===a?void 0:a.users}})):g.isError&&s.Ay.error("\u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")}),[g]),(0,d.useEffect)((()=>{var e;j.isSuccess&&t({type:h,payload:{users:null===(e=j.data)||void 0===e?void 0:e.users}})}),[j]);const N=(0,x.A)((e=>u.cN(e)));return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("section",{className:"p-6 overflow-x-scroll px-0 pt-0 pb-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-2xl my-5 text-gray-700",children:"DANH S\xc1CH NG\u01af\u1edcI D\xd9NG"}),(0,b.jsxs)("p",{className:"text-lg",children:["T\u1ed5ng s\u1ed1: ",(0,b.jsx)("span",{className:"text-primary text-xl",children:c})]})]}),(0,b.jsxs)("table",{className:"w-full min-w-[640px] table-auto",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:(0,b.jsx)("p",{className:"block antialiased text-[13px] font-bold uppercase text-blue-gray-400",children:"Ng\u01b0\u1eddi d\xf9ng"})}),(0,b.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-center",children:(0,b.jsx)("p",{className:"block antialiased text-[13px] font-bold uppercase text-blue-gray-400",children:"S\u0110T"})}),(0,b.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-center",children:(0,b.jsx)("p",{className:"block antialiased text-[13px] font-bold uppercase text-blue-gray-400",children:"Th\u1eddi \u0111i\u1ec3m \u0111\u0103ng k\xfd"})}),(0,b.jsx)("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-center",children:(0,b.jsx)("p",{className:"block antialiased text-[13px] font-bold uppercase text-blue-gray-400",children:"Ho\u1ea1t \u0111\u1ed9ng"})})]})}),(0,b.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map(((a,r)=>(0,b.jsxs)("tr",{className:"hover:cursor-pointer",onClick:()=>{var t;(t=a._id)&&e(`${o.Fo.userDetail}/${t}`)},children:[(0,b.jsx)("td",{className:"py-3 px-5 border-b border-lime-800 text-center",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("img",{src:a.avatar,alt:"Avatar",className:"inline-block relative object-cover object-center w-9 h-9 rounded-md"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"block antialiased text-base leading-normal text-blue-gray-900 font-semibold",children:a.name||""}),(0,b.jsx)("p",{className:"block antialiased text-base font-normal text-blue-gray-500",children:a.email||""})]})]})}),(0,b.jsx)("td",{className:"py-3 px-5 border-b border-lime-800 text-center",children:(0,b.jsx)("p",{className:"block antialiased text-base font-semibold text-blue-gray-600",children:a.phone||""})}),(0,b.jsx)("td",{className:"py-3 px-5 border-b border-lime-800 text-center",children:(0,b.jsx)("p",{className:"block antialiased text-base font-semibold text-blue-gray-600",children:a.createdAt?n()(a.createdAt).format("DD/MM/YYYY"):"null"})}),(0,b.jsx)("td",{className:"py-3 px-5 border-b border-lime-800 text-center",children:(0,b.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",className:"sr-only peer",onChange:()=>{var e;(e=a._id)&&(N.mutate({id:e}),t({type:m,payload:{id:e}}))},checked:a.isActive}),(0,b.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-primary dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary dark:peer-checked:bg-primary"}),(0,b.jsx)("span",{className:"ms-3 text-base font-medium text-gray-900 dark:text-gray-300"})]})})]},r)))})]}),(0,b.jsx)(l.A,{className:"mt-3",align:"end",onChange:e=>{return a=e,void j.mutate({skip:(Number(a-1)||0)*p.md});var a},defaultCurrent:1,defaultPageSize:p.md,total:c||p.md})]})})}},4247:(e,a,t)=>{t.d(a,{aU:()=>s,cN:()=>l,vF:()=>c});var r=t(307);const s=async e=>{try{const{skip:a,limit:t}=e,s=new URLSearchParams;Object.entries({skip:a,limit:t}).forEach((e=>{let[a,t]=e;t&&s.append(a,t)}));const l=await r.A.get(`/admin/user-management/userList?${s}`);return l.data?l.data.data:null}catch(a){if(a.response)throw new Error(a.response.data.message)}},l=async e=>{try{const{id:a}=e;if(!a)return null;const t=await r.A.patch(`/admin/user-management/activeUser/${a}`);if(t.data)return t.data}catch(a){if(a.response)throw a.response.data.message}},c=async e=>{try{const{id:a}=e;if(!a)return null;const t=await r.A.get(`/admin/user-management/detail/${a}`);if(t.data)return t.data.data}catch(a){if(a.response)throw a.response.data.message}}}}]);