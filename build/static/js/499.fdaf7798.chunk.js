"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[499],{3292:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(9324),r=s(4959),n=s(2260),i=s(4414);const o=e=>{let{title:t="TITLE",content:s="This is modal content",onLoading:o,onCancel:c,onOk:l,isShow:d,textButtonHandle:u="X\xf3a",bgColorButtonHandle:h="bg-red-500",className:p="",showFooter:m=!0}=e;return(0,i.jsx)(i.Fragment,{children:d&&(0,i.jsx)("div",{className:"fixed inset-0 z-30",children:(0,i.jsx)("div",{onClick:c,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,i.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${p}`,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,i.jsx)("h2",{className:"font-medium",children:t}),(0,i.jsx)("button",{className:"px-2 py-2",onClick:c,children:(0,i.jsx)(r.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:a.yYc})})]}),(0,i.jsx)("div",{className:"my-6",children:s}),m&&(0,i.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,i.jsx)("button",{onClick:c,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,i.jsx)("button",{onClick:l,className:`rounded ${h} text-white px-3 py-1 border-2`,children:o?(0,i.jsx)(n.A,{}):u})]})]})})})})}},1036:(e,t,s)=>{s.d(t,{A:()=>b});var a=s(9324),r=s(4959),n=s(9950),i=s(6250),o=s(1032),c=s(4194),l=s(8429),d=s(2074),u=s(5996),h=s(4967),p=s(4159),m=s.n(p),x=s(8553),g=s(3571),y=s(8091),j=s(300),v=s(4643),f=s(4414);const w=e=>{let{name:t,slug:s,time:p,questionCount:w=0,accessCount:b=0,examCount:N=0,imageSrc:C,id:A,onDelete:z=!1,isFavorite:q=!1}=e;const E=(0,l.Zp)(),k=(0,j.wA)(),S=(0,j.d4)((e=>e.user)),O=(0,y.A)((e=>g.a2(e)));return(0,n.useEffect)((()=>{O.isSuccess&&O.reset()}),[O.isSuccess]),q=S.favoriteQuiz.some((e=>e.slug===s)),(0,f.jsxs)("div",{className:"shrink-0 max-w-80 transition-all duration-300 shadow-lg rounded hover:shadow-2xl",children:[(0,f.jsx)("div",{onClick:()=>E(`${u.HR.reviewQuiz}/${s}`),className:"w-full h-52 flex justify-center content-center hover:cursor-pointer",children:(0,f.jsx)(c.A,{src:C,alt:t,placeholder:(0,f.jsx)(i.A,{color:o.Tj.primary})})}),(0,f.jsxs)("div",{className:"px-2 py-3",children:[(0,f.jsx)("p",{className:"font-bold text-base line-clamp-2",children:t}),p&&(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)(r.g,{className:"text-orange-900",icon:a.APe}),(0,f.jsx)("p",{className:"text-gray-700",children:m()(p).format("DD/MM/YYYY")})]}),(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsxs)("div",{className:"text-base flex gap-3",children:[(0,f.jsxs)(h.A,{trigger:"hover",content:"C\xe2u h\u1ecfi",children:[(0,f.jsx)(r.g,{icon:a.APe,className:"mr-1 text-yellow-500"}),(0,f.jsx)("span",{className:"text-gray-700",children:null!==w&&void 0!==w?w:0})]}),(0,f.jsxs)(h.A,{trigger:"hover",content:"L\u01b0\u1ee3t truy c\u1eadp",children:[(0,f.jsx)(r.g,{icon:a.s67,className:"mr-1 text-blue-500"}),(0,f.jsx)("span",{className:"text-gray-700",children:null!==b&&void 0!==b?b:0})]}),(0,f.jsxs)(h.A,{trigger:"hover",content:"S\u1ed1 l\u01b0\u1ee3t thi",children:[(0,f.jsx)(r.g,{icon:a.yjc,className:"mr-1 text-green-500"}),(0,f.jsx)("span",{className:"text-gray-700",children:null!==N&&void 0!==N?N:0})]})]})})]}),z&&(0,f.jsx)("div",{className:"px-2 py-2 border-t-2",children:(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("div",{className:"text-base flex gap-3",children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.A,{trigger:"hover",content:"Xem chi ti\u1ebft",children:(0,f.jsx)("button",{onClick:()=>E(`${u.tX.myQuiz}/${A}`),children:(0,f.jsx)(r.g,{icon:a.pS3,className:"pr-1 text-[#f27735]"})})}),(0,f.jsx)(h.A,{trigger:"hover",content:"Ch\u1ec9nh s\u1eeda \u0111\u1ec1 thi",children:(0,f.jsx)("button",{onClick:()=>E(`${u.tX.myQuiz}/chinh-sua/${A}`),children:(0,f.jsx)(r.g,{icon:a.MT7,className:"pr-1 text-[#851e3f]"})})}),(0,f.jsx)(h.A,{trigger:"hover",content:"X\xf3a \u0111\u1ec1 thi",children:(0,f.jsx)("button",{onClick:z,children:(0,f.jsx)(r.g,{icon:a.sjs,className:"pr-1 text-red-500"})})})]})})})}),(0,f.jsxs)("div",{className:"px-3 py-3 border-t-2 flex justify-between",children:[(0,f.jsxs)(d.N_,{to:`${u.HR.reviewQuiz}/${s}`,className:"inline-block rounded border hover:text-white hover:opacity-80 ease-linear transition-all duration-200 text-white bg-gradient-to-r from-primary to-[#1e998c] px-2 py-2",children:[(0,f.jsx)(r.g,{icon:a.e74,className:"pr-1"}),"V\xe0o \xf4n thi"]}),(0,f.jsx)("button",{onClick:()=>((e,t)=>{e&&(O.mutate({id:e}),k((0,v.a2)({slug:t})))})(A,s),children:(0,f.jsx)(r.g,{className:"text-red-500 text-2xl",icon:q?a.qcK:x.qcK})})]})]})},b=(0,n.memo)(w)},5499:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var a=s(7086),r=s(9950),n=s(9519),i=s(4959),o=s(9324),c=s(3491),l=s(1759),d=s(8429),u=s(5996),h=s(300),p=s(5129),m=s(62),x=s(8091),g=s(1036);new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});const y=e=>Array.isArray(e)?e.reduce(((e,t)=>{var s;return e+(null===t||void 0===t||null===(s=t.questions)||void 0===s?void 0:s.length)}),0):0;var j=s(3292),v=s(1032),f=s(4414);const w=(0,r.createContext)(),b=e=>{let{children:t}=e;const[s,i]=(0,r.useState)([]),o=(0,h.wA)(),c=(0,h.d4)((e=>e.quiz)),l=(0,a.I)({queryKey:[""],queryFn:()=>(async()=>{if(c.quiz.length<=0){const e=await n.qY({});return i(e.quizzes),o((0,p.Y0)(e.quizzes)),e}return c.quiz!==s&&i(c.quiz),c})()});return(0,f.jsx)(w.Provider,{value:{quizzesData:s,setQuizzesData:i,isLoading:l.isLoading},children:t})},N=()=>{const{quizzesData:e,setQuizzesData:t,isLoading:s}=(0,r.useContext)(w),a=(0,d.Zp)(),[b,N]=(0,r.useState)(!1),[C,A]=(0,r.useState)(null),z=(0,h.wA)(),q=(0,x.A)((e=>n.hj(e))),E=(0,r.useCallback)((()=>{N(!1),A(null)}),[]),k=(0,r.useCallback)((()=>{C&&q.mutate({id:C})}),[C]),S=(0,x.A)((e=>n.qY(e)));return(0,r.useEffect)((()=>{if(q.isSuccess&&q.data){const{id:e}=q.data;e?(z((0,p.Dm)({id:e})),t((t=>(t=[...t]).filter((t=>t._id!==e)))),E(),c.Ay.success("X\xf3a b\xe0i tr\u1eafc nghi\u1ec7m th\xe0nh c\xf4ng")):c.Ay.error("X\xf3a b\xe0i tr\u1eafc nghi\u1ec7m th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i")}else q.isError&&c.Ay.error("X\xf3a b\xe0i tr\u1eafc nghi\u1ec7m th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i")}),[q.isError,q.isSuccess]),(0,r.useEffect)((()=>{S.isSuccess&&t(S.data)}),[S.isSuccess]),(0,r.useLayoutEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"flex justify-between my-5",children:(0,f.jsx)("h4",{className:"font-semibold text-gray-500",children:"Danh s\xe1ch \u0111\u1ec1 thi"})}),(0,f.jsxs)("section",{className:"rounded-xl bg-white px-8 py-8 flex gap-10 flex-wrap shadow",children:[(0,f.jsx)(f.Fragment,{children:s||S.isPending?(0,f.jsx)(m.A,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"w-full border-b-2 px-9 py-1 flex justify-between",children:[(0,f.jsxs)("p",{className:"font-semibold text-xl",children:[(0,f.jsx)("span",{className:"text-primary mr-2",children:(null===e||void 0===e?void 0:e.length)||0}),(0,f.jsx)("span",{className:"text-slate-600",children:"\u0110\u1ec1 thi"})]}),(0,f.jsxs)("button",{onClick:()=>a(u.Ay.createQuiz),className:"px-2 py-1 text-primary font-semibold rounded border-primary border-2 hover:text-primary hover:opacity-55 transition-all duration-200",children:[(0,f.jsx)(i.g,{icon:o.CHJ,className:"mr-1"}),"T\u1ea1o \u0111\u1ec1 thi"]})]}),(0,f.jsx)("div",{className:"grid w-full h-full grid-cols-2 gap-4 px-0 pb-4 sm:grid-cols-3 md:grid-cols-4  2xl:grid-cols-5",children:e.length>0?e.map(((e,t)=>(0,f.jsx)(g.A,{name:e.name,accessCount:e.accessCount,examCount:e.examCount,questionCount:(null===e||void 0===e?void 0:e.questionCount)||y(e.quiz),imageSrc:e.thumb,id:e._id,slug:e.slug,onDelete:()=>{return t=e._id,N(!0),void A(t);var t}},t))):"Kh\xf4ng th\u1ea5y \u0111\u1ec1 thi n\xe0o \ud83d\ude1f\ud83d\ude1f\ud83d\ude1f\ud83d\ude1f"})]})}),(0,f.jsx)(l.A,{align:"end",onChange:e=>{return t=e,void(isNaN(Number(t))||S.mutate({skip:t}));var t},defaultCurrent:1,defaultPageSize:v.md,total:(null===e||void 0===e?void 0:e.length)||0})]}),(0,f.jsx)(j.A,{isShow:b,onCancel:E,onLoading:q.isPending,onOk:k})]})},C=()=>(0,f.jsx)(b,{children:(0,f.jsx)(N,{})})},9519:(e,t,s)=>{s.d(t,{hG:()=>l,wn:()=>c,hj:()=>m,Wk:()=>x,h3:()=>o,iC:()=>p,mU:()=>h,qY:()=>i,J7:()=>d,z1:()=>u});var a=s(3491),r=s(307);const n=s(9246).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),i=async e=>{try{const s=new URLSearchParams;Object.entries(e).forEach((e=>{let[t,a]=e;void 0!=a&&s.append(t,String(a))}));const a=await r.A.get(`/quiz/mine?${s}`);var t;return 200===a.status&&a.data&&(null!==(t=a.data.data)&&void 0!==t)?t:[]}catch(a){var s;if(console.log(a),a.response)throw new Error(null===(s=a.response)||void 0===s?void 0:s.data)}},o=async e=>{try{const t=await r.A.get(`/quiz/detail?id=${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},c=async e=>{try{const{name:t,description:s,school:a,subject:n,topic:i,schoolYear:o,educationLevel:c,thumb:l}=e,d=await r.A.post("/quiz/create",JSON.stringify({name:t,description:s,school:a,subject:n,topic:i,schoolYear:o,educationLevel:c,thumb:l}));return 200===d.status&&d.data?d.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},l=async e=>{try{const{id:t,partName:s,questionType:a,questionContent:n,answers:i}=e,o=await r.A.put("/quiz/createQuestion",JSON.stringify({id:t,partName:s,questionType:a,questionContent:n,answers:i}));return 200===o.status&&o.data?o.data.data:{}}catch(t){if(t.response)throw a.Ay.error(t.response.data),new Error(t.response.data)}},d=async e=>{try{const t=await r.A.put("/quiz/updateGeneralInfo",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw a.Ay.error(t.response.data),new Error(t.response.data)}},u=async e=>{try{const t=await r.A.put("/quiz/updateQuestion",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:t}catch(t){if(t.response)throw console.log(t.response),new Error(t.response.data)}},h=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await n.get(`/quiz/preview/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},p=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await r.A.get(`/quiz/forExam/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},m=async e=>{try{const{id:t}=e;if(!t)throw new Error("C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh x\xf3a");const s=await r.A.delete(`/quiz/${t}/deleteQuiz`);return 200===s.status&&s.data?s.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},x=async e=>{try{const{name:t,page:s,limit:a,skip:r,subject:i,topic:o,schoolYear:c,educationLevel:l}=e,d=new URLSearchParams;Object.entries({name:t,page:s,limit:a,skip:r,subject:i,topic:o,schoolYear:c,educationLevel:l}).forEach((e=>{let[t,s]=e;void 0!==s&&d.append(t,String(s))}));const u=await n.get(`/quiz/discovery?${d}`);return 200===u.status&&u.data?u.data.data:[]}catch(t){throw new Error(t.response.data)}}},6250:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(9950),r=s(6267),n=s(6299),i=function(){return i=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},o=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s},c=(0,n.J)("ScaleLoader","0% {transform: scaley(1.0)} 50% {transform: scaley(0.4)} 100% {transform: scaley(1.0)}","scale");const l=function(e){var t=e.loading,s=void 0===t||t,n=e.color,l=void 0===n?"#000000":n,d=e.speedMultiplier,u=void 0===d?1:d,h=e.cssOverride,p=void 0===h?{}:h,m=e.height,x=void 0===m?35:m,g=e.width,y=void 0===g?4:g,j=e.radius,v=void 0===j?2:j,f=e.margin,w=void 0===f?2:f,b=o(e,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),N=i({display:"inherit"},p),C=function(e){return{backgroundColor:l,width:(0,r.p)(y),height:(0,r.p)(x),margin:(0,r.p)(w),borderRadius:(0,r.p)(v),display:"inline-block",animation:"".concat(c," ").concat(1/u,"s ").concat(.1*e,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return s?a.createElement("span",i({style:N},b),a.createElement("span",{style:C(1)}),a.createElement("span",{style:C(2)}),a.createElement("span",{style:C(3)}),a.createElement("span",{style:C(4)}),a.createElement("span",{style:C(5)})):null}}}]);