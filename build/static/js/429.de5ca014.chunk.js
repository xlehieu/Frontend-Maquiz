"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[429],{3292:(e,l,t)=>{t.d(l,{A:()=>n});var s=t(9324),o=t(4959),a=t(2260),r=t(4414);const n=e=>{let{title:l="TITLE",content:t="This is modal content",onLoading:n,onCancel:i,onOk:d,isShow:c,textButtonHandle:u="X\xf3a",bgColorButtonHandle:x="bg-red-500",className:m="",showFooter:h=!0}=e;return(0,r.jsx)(r.Fragment,{children:c&&(0,r.jsx)("div",{className:"fixed inset-0 z-30",children:(0,r.jsx)("div",{onClick:i,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${m}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,r.jsx)("h2",{className:"font-medium",children:l}),(0,r.jsx)("button",{className:"px-2 py-2",onClick:i,children:(0,r.jsx)(o.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:s.yYc})})]}),(0,r.jsx)("div",{className:"my-6",children:t}),h&&(0,r.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,r.jsx)("button",{onClick:i,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,r.jsx)("button",{onClick:d,className:`rounded ${x} text-white px-3 py-1 border-2`,children:n?(0,r.jsx)(a.A,{}):u})]})]})})})})}},5429:(e,l,t)=>{t.r(l),t.d(l,{default:()=>L});var s=t(9324),o=t(4959),a=t(8287),r=t(3491),n=t(9950),i=t(2074),d=t(8429),c=t(3292),u=t(8091),x=t(6188),m=t(2260),h=t(5996),p=t(7086),v=t(4194),f=t(1032),b=t(4414);const g=(0,n.createContext)(),j=(0,n.createContext)(),w=(0,n.createContext)(),y=(0,n.createContext)(),N=e=>{let{children:l}=e;const[t,s]=(0,n.useState)(!1),[o,a]=(0,n.useState)(""),[r,i]=(0,n.useState)((0,b.jsx)(b.Fragment,{})),[d,c]=(0,n.useState)("");return(0,b.jsx)(j.Provider,{value:{isShowModal:t,setIsShowModal:s,titleModal:o,setTitleModal:a,contentModal:r,setContentModal:i,textHandleModal:d,setTextHandleModal:c},children:l})},C=e=>{let{children:l}=e;const[t,s]=(0,n.useState)(""),[o,a]=(0,n.useState)("");return(0,b.jsx)(g.Provider,{value:{classroomName:t,setClassroomName:s,subjectName:o,setSubjectName:a},children:l})},S=e=>{let{children:l}=e;const{data:t,isLoading:s,error:o}=(0,p.I)({queryKey:["userClassroom"],queryFn:()=>x.Uz(),refetchOnWindowFocus:!0});return(0,b.jsx)(w.Provider,{value:{classList:t,isLoadingQuery:s},children:l})},k=e=>{let{children:l}=e;const[t,s]=(0,n.useState)("");return(0,b.jsx)(y.Provider,{value:{classCode:t,setClassCode:s},children:l})},M=e=>{var l,t,s,o,a,r,n,d;let{classroom:c,isMyClassroom:u=!1}=e;return(0,b.jsxs)("div",{className:"w-full bg-white transition-all block duration-300 border-2 border-gray-200 rounded-lg overflow-hidden pb-3 hover:drop-shadow-lg relative h-56",children:[null!==c&&void 0!==c&&c.thumb?(0,b.jsx)(v.A,{alt:null!==(l=null===c||void 0===c?void 0:c.name)&&void 0!==l?l:"classroom image",src:null===c||void 0===c?void 0:c.thumb,className:"w-full h-20 opacity-60"}):(0,b.jsx)(v.A,{alt:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"classroom image",src:f.$k,className:"w-full h-20 opacity-60"}),(0,b.jsxs)("div",{className:"relative h-12",children:[(null===c||void 0===c||null===(s=c.teacher)||void 0===s?void 0:s.avatar)&&(0,b.jsx)(v.A,{alt:null!==(o=null===c||void 0===c||null===(a=c.teacher)||void 0===a?void 0:a.name)&&void 0!==o?o:"teacher image",src:null===c||void 0===c||null===(r=c.teacher)||void 0===r?void 0:r.avatar,className:"w-12 h-full rounded-full overflow-hidden absolute z-0 -top-1/2 right-3"}),(null===c||void 0===c?void 0:c.name)&&(0,b.jsx)(i.N_,{to:`${h.tX.classroom}/${null===c||void 0===c?void 0:c.classCode}`,className:"z-10 text-2xl text-gray-700 font-normal ml-3 line-clamp-1 hover:underline",children:null===c||void 0===c?void 0:c.name})]}),!u&&(null===c||void 0===c||null===(n=c.teacher)||void 0===n?void 0:n.name)&&(0,b.jsx)("div",{className:"z-10 text-xl md:text-lg absolute bottom-2 text-black font-light ml-3 line-clamp-1",children:null===c||void 0===c||null===(d=c.teacher)||void 0===d?void 0:d.name})]})},A=()=>{var e,l,t,s;const{classList:o}=(0,n.useContext)(w);return(0,b.jsxs)(b.Fragment,{children:[(null===o||void 0===o||null===(e=o.myClassrooms)||void 0===e?void 0:e.length)>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-4",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"L\u1edbp h\u1ecdc c\u1ee7a t\xf4i"})}),(0,b.jsx)("div",{className:"w-full grid gap-3 grid-cols-2 md:grid-cols-3 2xl:grid-cols-4",children:null===o||void 0===o||null===(l=o.myClassrooms)||void 0===l?void 0:l.map(((e,l)=>(0,b.jsx)("div",{children:(0,b.jsx)(M,{isMyClassroom:!0,classroom:e})},l)))})]}),(null===o||void 0===o||null===(t=o.enrolledClassrooms)||void 0===t?void 0:t.length)>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-4",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"L\u1edbp h\u1ecdc \u0111ang tham gia"})}),(0,b.jsx)("div",{className:"w-full grid gap-3 grid-cols-2 md:grid-cols-3 2xl:grid-cols-4",children:null===o||void 0===o||null===(s=o.enrolledClassrooms)||void 0===s?void 0:s.map(((e,l)=>(0,b.jsx)("div",{children:(0,b.jsx)(M,{classroom:e})},l)))})]})]})},T=()=>{const e=(0,d.Zp)(),{setIsShowModal:l}=(0,n.useContext)(j),{classCode:t,setClassCode:s}=(0,n.useContext)(y),o=(0,u.A)((e=>x.Zc(e)));return(0,n.useEffect)((()=>{o.isError?r.Ay.error(null===o||void 0===o?void 0:o.error.message):o.isSuccess&&(r.Ay.success("Tham gia l\u1edbp h\u1ecdc th\xe0nh c\xf4ng"),e(`${h.tX.classroom}/${t}`))}),[o.isError,o.isSuccess]),(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("input",{type:"text",id:"classroomCode",placeholder:" ",value:t,onChange:e=>s(e.target.value),className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all"}),(0,b.jsx)("label",{htmlFor:"classroomCode",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"M\xe3 l\u1edbp"})]}),(0,b.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>l(!1),className:"text-blue-500 px-2 py-1 font-semibold",children:"H\u1ee7y"}),(0,b.jsx)("button",{onClick:()=>{if(null===t||void 0===t||!t.trim())return r.Ay.error("Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp h\u1ecdc");o.mutate({classCode:t})},className:(null!==t&&void 0!==t&&t.trim()?"text-blue-500":"text-gray-400")+" font-semibold px-2 py-1 ",children:o.isPending?(0,b.jsx)(m.A,{}):"Tham gia"})]})]})},E=()=>{const e=(0,d.Zp)(),{setIsShowModal:l}=(0,n.useContext)(j),{classroomName:t,setClassroomName:s,subjectName:o,setSubjectName:a}=(0,n.useContext)(g),i=(0,u.A)((e=>x.ot(e)));return(0,n.useEffect)((()=>{var t;i.isSuccess?(r.Ay.success("T\u1ea1o l\u1edbp h\u1ecdc th\xe0nh c\xf4ng"),l(!1),s(""),a(""),e(`${h.tX.classroom}/${null===(t=i.data)||void 0===t?void 0:t.classCode}`)):i.isError&&r.Ay.error("T\u1ea1o l\u1edbp h\u1ecdc th\u1ea5t b\u1ea1i")}),[i.isError,i.isSuccess]),(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("input",{type:"text",id:"classroomName",placeholder:" ",autoComplete:"off",className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all",value:t,onChange:e=>s(e.target.value)}),(0,b.jsx)("label",{htmlFor:"classroomName",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"T\xean l\u1edbp"})]}),(0,b.jsxs)("div",{className:"relative w-full mt-5",children:[(0,b.jsx)("input",{type:"text",id:"classroomSubject",placeholder:" ",autoComplete:"off",className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all",value:o,onChange:e=>a(e.target.value)}),(0,b.jsx)("label",{htmlFor:"classroomSubject",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"M\xf4n h\u1ecdc"})]}),(0,b.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>l(!1),className:"rounded bg-white px-3 py-1 border-2",children:"H\u1ee7y"}),(0,b.jsx)("button",{disabled:!(null!==t&&void 0!==t&&t.trim())||!(null!==o&&void 0!==o&&o.trim()),onClick:()=>{if(null===t||void 0===t||!t.trim()||null===o||void 0===o||!o.trim())return r.Ay.warning("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin");i.mutate({classroomName:t,subjectName:o})},className:`${!(null!==t&&void 0!==t&&t.trim())||!(null!==o&&void 0!==o&&o.trim())&&"opacity-25"}rounded bg-primary text-white px-3 py-1 border-2`,children:i.isPending?(0,b.jsx)(m.A,{}):"T\u1ea1o l\u1edbp h\u1ecdc"})]})]})},F=[{title:"Tham gia l\u1edbp h\u1ecdc",content:(0,b.jsx)(T,{}),textHandleButton:"Tham gia"},{title:"T\u1ea1o l\u1edbp h\u1ecdc",content:(0,b.jsx)(E,{}),textHandleButton:"T\u1ea1o l\u1edbp h\u1ecdc"}],H=()=>{const{isShowModal:e,setIsShowModal:l,titleModal:t,setTitleModal:r,contentModal:i,setContentModal:d,textHandleModal:u,setTextHandleModal:x}=(0,n.useContext)(j);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex justify-between my-5 w-full",children:(0,b.jsx)("h4",{className:"font-medium text-gray-500",children:"L\u1edbp h\u1ecdc"})}),(0,b.jsxs)("section",{className:"w-full min-h-screen bg-white px-8 rounded-xl shadow-lg flex flex-col",children:[(0,b.jsx)("div",{className:"w-full border-b flex justify-end",children:(0,b.jsx)(a.Ay,{interactive:!0,hideOnClick:"toggle",placement:"bottom-end",offset:[10,-10],content:(0,b.jsx)("div",{className:"flex flex-col shadow-md bg-white",tabIndex:"-1",children:F.map(((e,t)=>(0,b.jsx)("button",{onClick:()=>{return t=e.title,s=e.content,o=e.textHandleButton,r(t),d(s),x(o),void l(!0);var t,s,o},className:"text-gray-600 duration-200 px-4 py-2 text-left hover:rounded hover:bg-black hover:bg-opacity-5",children:null===e||void 0===e?void 0:e.title},t)))}),children:(0,b.jsx)("button",{className:"mr-3 px-2 py-2",children:(0,b.jsx)(o.g,{icon:s.QLR,className:"text-3xl md:text-xl text-gray-500"})})})}),(0,b.jsx)(A,{})]}),(0,b.jsx)(c.A,{className:"w-1/2",title:t,content:i,textButtonHandle:u,onCancel:()=>l(!1),bgColorButtonHandle:"bg-primary",isShow:e,showFooter:!1})]})},L=()=>(0,b.jsx)(N,{children:(0,b.jsx)(C,{children:(0,b.jsx)(S,{children:(0,b.jsx)(k,{children:(0,b.jsx)(H,{})})})})})},6188:(e,l,t)=>{t.d(l,{Pc:()=>r,Uz:()=>a,Zc:()=>n,ot:()=>o});var s=t(307);const o=async e=>{try{var l;const{classroomName:t,subjectName:o}=e;if(null===t||void 0===t||!t.trim()||null===o||void 0===o||!o.trim())throw new Error("T\xean l\u1edbp h\u1ecdc v\xe0 t\xean m\xf4n h\u1ecdc kh\xf4ng th\u1ec3 b\u1ecf tr\u1ed1ng");const a=await s.A.post("/classroom/create",JSON.stringify({name:t,subject:o}));return a.data?null===(l=a.data)||void 0===l?void 0:l.data:null}catch(a){var t,o;if(a.response)throw new Error(null===(t=a.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)}},a=async()=>{try{var e;const l=await s.A.get("/classroom/mine");return l.data?null===(e=l.data)||void 0===e?void 0:e.data:null}catch(o){var l,t;if(o.response)throw new Error(null===o||void 0===o||null===(l=o.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)}},r=async e=>{try{const{classCode:l}=e,t=new URLSearchParams;if(Object.entries({classCode:l}).forEach((e=>{let[l,s]=e;void 0!==s&&t.append(l,String(s))})),null===l||void 0===l||!l.trim())throw new Error("L\u1ed7i");const o=await s.A.get(`/classroom/detail?${t}`);return 200===o.status&&o.data?o.data.data:null}catch(o){var l,t;if(o.response)throw new Error(null===o||void 0===o||null===(l=o.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)}},n=async e=>{try{const{classCode:l}=e;if(null===l||void 0===l||!l.trim())throw new Error("Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp");const t=await s.A.patch("/classroom/enroll",JSON.stringify({classCode:l}));return 200===t.status&&t.data?t.data.data:null}catch(t){var l;if(t.response)throw new Error(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.data.message)}}}}]);