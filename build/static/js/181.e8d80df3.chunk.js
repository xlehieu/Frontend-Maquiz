"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[181],{3292:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(9324),r=s(4959),n=s(2260),o=s(4414);const i=e=>{let{title:t="TITLE",content:s="This is modal content",onLoading:i,onCancel:l,onOk:d,isShow:c,textButtonHandle:u="X\xf3a",bgColorButtonHandle:h="bg-red-500",className:m="",showFooter:x=!0}=e;return(0,o.jsx)(o.Fragment,{children:c&&(0,o.jsx)("div",{className:"fixed inset-0 z-30",children:(0,o.jsx)("div",{onClick:l,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${m}`,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,o.jsx)("h2",{className:"font-medium",children:t}),(0,o.jsx)("button",{className:"px-2 py-2",onClick:l,children:(0,o.jsx)(r.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:a.yYc})})]}),(0,o.jsx)("div",{className:"my-6",children:s}),x&&(0,o.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,o.jsx)("button",{onClick:l,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,o.jsx)("button",{onClick:d,className:`rounded ${h} text-white px-3 py-1 border-2`,children:i?(0,o.jsx)(n.A,{}):u})]})]})})})})}},243:(e,t,s)=>{s.d(t,{A:()=>a});const a={askBeforePasteHTML:!1,defaultActionOnPaste:"insert_only_text",buttons:["bold","italic","fontsize","font","brush"],toolbarAdaptive:!1}},7181:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(9324),r=s(4959),n=s(7086),o=s(8287),i=s(3491),l=s(4159),d=s.n(l),c=s(8740),u=s(4554),h=s.n(u),m=s(9950),x=s(300),p=s(8429),v=s(6158),g=s(4194),w=s(62),y=s(3292),f=s(5996),b=s(243),j=s(8091),N=s(6188),A=s(307);var z=s(9519),C=s(4414);const q=(0,m.createContext)(),E=e=>{let{children:t}=e;const{classCode:s}=(0,p.g)(),a=(0,n.I)({queryKey:["queryClassDetail"],queryFn:()=>N.Pc({classCode:s})});return(0,m.useEffect)((()=>{a.isError&&i.Ay.error((null===a||void 0===a?void 0:a.error.message)||"C\xf3 l\u1ed7i x\u1ea3y ra")}),[a.isError]),(0,C.jsx)(q.Provider,{value:{classroom:a.data},children:a.isLoading?(0,C.jsx)(w.A,{}):(0,C.jsx)(C.Fragment,{children:t})})};const S=e=>{let{quizzes:t=[],selectedQuizzes:s,setSelectedQuizzes:a}=e;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"absolute z-30 w-2/3 gap-2 grid grid-cols-2 md:grid-cols-3 xl:grid-cols-5 top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-white px-5 py-5 rounded-md",children:(null===t||void 0===t?void 0:t.length)>0&&t.map(((e,t)=>(0,C.jsxs)("div",{className:`border-2 ${s.includes(e._id)?"border-primary border-4":"border-gray-300"} rounded shadow`,onClick:()=>{return t=e._id,void a((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},children:[(0,C.jsx)(g.A,{alt:e.name,src:e.thumb}),(0,C.jsx)("p",{className:"mt-2",children:e.name})]},t)))})})},k=()=>{var e,t;const s=(0,p.Zp)(),{classroom:l}=(0,m.useContext)(q),[u,w]=(0,m.useState)(!1),[N,E]=(0,m.useState)(!1),[k,L]=(0,m.useState)(""),$=(0,x.d4)((e=>e.user)),O=(0,n.I)({queryKey:["queryQuizzes"],queryFn:()=>z.qY({})}),[T,B]=(0,m.useState)([]),P=(0,j.A)((e=>(async e=>{try{const{content:t}=e;if(!t)throw"Ph\u1ea3i c\xf3 n\u1ed9i dung th\xf4ng b\xe1o cho l\u1edbp h\u1ecdc";if(200===(await A.A.post("/post",JSON.stringify(e))).status)return"\u0110\u0103ng b\xe0i th\xe0nh c\xf4ng"}catch(t){if(console.log(t),t.response)throw new Error(t.response.data.message||"Th\xf4ng b\xe1o th\u1ea5t b\u1ea1i")}})(e)));(0,m.useEffect)((()=>{P.isError?i.Ay.error(P.error.message):P.isSuccess&&(i.Ay.success("Th\xeam th\xf4ng b\xe1o l\u1edbp h\u1ecdc th\xe0nh c\xf4ng"),L(""),B([]),E(!1),P.reset())}),[P.isError,P.isSuccess]);const Y=(0,j.A)((e=>(async e=>{try{const{postIdToDelete:t}=e;if(!t)throw"L\u1ed7i";if(200===(await A.A.delete(`/post/${t}`)).status)return"X\xf3a b\xe0i th\xe0nh c\xf4ng"}catch(t){}})(e))),[Q,F]=(0,m.useState)(null);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsxs)("div",{className:"md:rounded-2xl md:overflow-hidden w-full h-56 relative",children:[(0,C.jsx)("img",{className:"w-full h-full object-cover opacity-80",src:null===l||void 0===l?void 0:l.thumb,alt:"class image"}),(0,C.jsx)("h3",{className:"absolute bottom-4 left-4 text-4xl font-medium text-white line-clamp-1",children:null===l||void 0===l?void 0:l.name})]}),(0,C.jsx)("div",{className:"mt-5",children:(0,C.jsxs)("div",{children:[(0,C.jsx)(h(),{config:{...b.A,minHeight:150,placeholder:"Th\xf4ng b\xe1o cho l\u1edbp h\u1ecdc"},value:k,onBlur:e=>L(e)}),(0,C.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,C.jsxs)("button",{className:"text-2xl md:text-base bg-primary text-white rounded px-3 py-1 ",onClick:()=>E(!N),children:[(0,C.jsx)(r.g,{className:"mr-1",icon:a.ReK}),"Th\xeam \u0111\u1ec1 thi"]}),(0,C.jsx)("button",{onClick:()=>{if(!(k.replace(/<\/?p>/g,"").trim().length>0))return i.Ay.warning("Vui l\xf2ng nh\u1eadp n\u1ed9i dung th\xf4ng b\xe1o cho l\u1edbp h\u1ecdc");P.mutate({classroomId:null===l||void 0===l?void 0:l._id,content:k,quizzes:T})},className:"text-2xl md:text-base bg-primary text-white rounded px-3 py-1",children:"\u0110\u0103ng"})]})]})}),(0,C.jsx)("div",{className:"mt-5",children:null===l||void 0===l||null===(e=l.posts)||void 0===e?void 0:e.map(((e,t)=>{var n,i,l,u,h,m;return(0,C.jsxs)("div",{className:"w-full border rounded px-3 py-3",children:[(0,C.jsxs)("div",{className:"flex justify-between border-b-2 border-gray-300 pb-2",children:[(0,C.jsxs)("div",{className:"flex items-center",children:[(null===e||void 0===e||null===(n=e.createdBy)||void 0===n?void 0:n.avatar)&&(0,C.jsx)("img",{className:"w-12 h-12 border-2 rounded-full mr-2",src:null===e||void 0===e||null===(i=e.createdBy)||void 0===i?void 0:i.avatar,alt:"avatar"}),(0,C.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,C.jsx)("p",{className:"text-md font-semibold text-gray-600",children:(null===e||void 0===e||null===(l=e.createdBy)||void 0===l?void 0:l.name)||(null===e||void 0===e||null===(u=e.createdBy)||void 0===u?void 0:u.email)}),(0,C.jsx)("span",{className:"text-gray-400 text-xs",children:(null===e||void 0===e?void 0:e.createdAt)&&d()(null===e||void 0===e?void 0:e.createdAt).format("DD/MM/YYYY")})]})]}),(null===e||void 0===e||null===(h=e.createdBy)||void 0===h?void 0:h.email)===(null===$||void 0===$?void 0:$.email)&&(0,C.jsx)("div",{children:(0,C.jsx)(o.Ay,{interactive:!0,trigger:"click",placement:"bottom-end",offset:[0,0],content:(0,C.jsx)("div",{className:"flex flex-col shadow-md bg-white w-28 rounded-md overflow-hidden",tabIndex:"-1",children:(0,C.jsxs)("button",{onClick:()=>{return t=e._id,console.log(t),w(!0),void F(t);var t},className:"py-1 px-2 text-white bg-red-500 hover:opacity-80 transition-all",children:[(0,C.jsx)(r.g,{className:"mr-1",icon:a.yLS}),"X\xf3a"]})}),children:(0,C.jsx)("button",{className:"mr-3 px-2 py-2",children:(0,C.jsx)(r.g,{icon:a.nx5,className:"text-3xl md:text-xl text-gray-700"})})})})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,c.Ay)(e.content)}),(null===e||void 0===e?void 0:e.quizzes)&&(0,C.jsxs)("div",{className:"grid gap-2 grid-cols-2 md:grid-cols-4 xl:grid-cols-5 pt-2 border-t-2 border-gray-300",children:[(0,C.jsx)("p",{className:"text-xl text-emerald-900 col-span-2 md:col-span-4 xl:col-span-5",children:"\u0110\u1ec1 thi:"}),null===e||void 0===e||null===(m=e.quizzes)||void 0===m?void 0:m.map(((e,t)=>(0,C.jsxs)("button",{onClick:()=>s(`${f.HR.reviewQuiz}/${e.slug}`),className:"rounded border pb-2 shadow hover:shadow-lg",children:[(0,C.jsx)(g.A,{src:e.thumb}),e.name]},t)))]})]},t)}))}),N&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(v.A,{onClick:()=>E(!N),isActive:N}),(0,C.jsx)(S,{quizzes:null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.quizzes,selectedQuizzes:T,setSelectedQuizzes:B})]})]}),(0,C.jsx)(y.A,{isShow:u,onCancel:()=>w(!1),onOk:()=>(()=>{if(!Q)return i.Ay.error("L\u1ed7i");Y.mutate({postIdToDelete:Q})})(),onLoading:Y.isPending,title:"X\xf3a th\xf4ng b\xe1o l\u1edbp h\u1ecdc",content:"B\u1ea1n c\xf3 ch\u1eafc v\u1ec1 qu\u1ebft \u0111\u1ecbnh n\xe0y?"})]})},L=()=>{const{classroom:e}=(0,m.useContext)(q);return(0,C.jsxs)("div",{className:"w-full bg-white",children:[(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsx)("div",{className:"w-full border-b-2",children:(0,C.jsx)("h3",{children:"Gi\xe1o vi\xean"})}),(0,C.jsx)("div",{})]}),e.students.map((e=>{}))]})},$={0:{label:"B\u1ea3ng tin",content:(0,C.jsx)(k,{})},1:{label:"M\u1ecdi ng\u01b0\u1eddi",content:(0,C.jsx)(L,{})}},O=()=>{var e;const[t,s]=(0,m.useState)(0);return(0,C.jsxs)("div",{className:"w-full mt-2 md:mt-0 min-h-screen bg-white px-8 py-4 rounded-xl shadow-lg flex flex-col",children:[(0,C.jsx)("div",{className:"w-full flex flex-nowrap overflow-scroll gap-4",children:Object.entries($).map(((e,a)=>{let[r,n]=e;return(0,C.jsx)("button",{className:`border-b-2 px-2 py-1 ${t==r?"border-primary":"border-white"} transition-all duration-300`,onClick:()=>s(r),children:(0,C.jsx)("span",{className:`font-medium text-gray-500 ${t==r?"text-primary":""} transition-all duration-300`,children:n.label})},a)}))}),(0,C.jsx)("div",{className:"flex-grow",children:null===(e=$[t])||void 0===e?void 0:e.content})]})},T=()=>(0,C.jsx)(E,{children:(0,C.jsx)(O,{})})},6188:(e,t,s)=>{s.d(t,{Pc:()=>o,Uz:()=>n,Zc:()=>i,ot:()=>r});var a=s(307);const r=async e=>{try{var t;const{classroomName:s,subjectName:r}=e;if(null===s||void 0===s||!s.trim()||null===r||void 0===r||!r.trim())throw new Error("T\xean l\u1edbp h\u1ecdc v\xe0 t\xean m\xf4n h\u1ecdc kh\xf4ng th\u1ec3 b\u1ecf tr\u1ed1ng");const n=await a.A.post("/classroom/create",JSON.stringify({name:s,subject:r}));return n.data?null===(t=n.data)||void 0===t?void 0:t.data:null}catch(n){var s,r;if(n.response)throw new Error(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)}},n=async()=>{try{var e;const t=await a.A.get("/classroom/mine");return t.data?null===(e=t.data)||void 0===e?void 0:e.data:null}catch(r){var t,s;if(r.response)throw new Error(null===r||void 0===r||null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)}},o=async e=>{try{const{classCode:t}=e,s=new URLSearchParams;if(Object.entries({classCode:t}).forEach((e=>{let[t,a]=e;void 0!==a&&s.append(t,String(a))})),null===t||void 0===t||!t.trim())throw"L\u1ed7i";const r=await a.A.get(`/classroom/detail?${s}`);return 200===r.status&&r.data?r.data.data:null}catch(r){var t,s;if(r.response)throw new Error(null===r||void 0===r||null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)}},i=async e=>{try{const{classCode:t}=e;if(null===t||void 0===t||!t.trim())throw"Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp";const s=await a.A.patch("/classroom/enroll",JSON.stringify({classCode:t}));return 200===s.status&&s.data?s.data.data:null}catch(s){var t;if(s.response)throw new Error(null===s||void 0===s||null===(t=s.response)||void 0===t?void 0:t.data.message)}}},9519:(e,t,s)=>{s.d(t,{hG:()=>d,wn:()=>l,hj:()=>x,Wk:()=>p,h3:()=>i,iC:()=>m,mU:()=>h,qY:()=>o,J7:()=>c,z1:()=>u});var a=s(3491),r=s(307);const n=s(9246).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),o=async e=>{try{const s=new URLSearchParams;Object.entries(e).forEach((e=>{let[t,a]=e;void 0!=a&&s.append(t,String(a))}));const a=await r.A.get(`/quiz/mine?${s}`);var t;return 200===a.status&&a.data&&(null!==(t=a.data.data)&&void 0!==t)?t:[]}catch(a){var s;if(console.log(a),a.response)throw new Error(null===(s=a.response)||void 0===s?void 0:s.data)}},i=async e=>{try{const t=await r.A.get(`/quiz/detail?id=${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},l=async e=>{try{const{name:t,description:s,school:a,subject:n,topic:o,schoolYear:i,educationLevel:l,thumb:d}=e,c=await r.A.post("/quiz/create",JSON.stringify({name:t,description:s,school:a,subject:n,topic:o,schoolYear:i,educationLevel:l,thumb:d}));return 200===c.status&&c.data?c.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},d=async e=>{try{const{id:t,partName:s,questionType:a,questionContent:n,answers:o}=e,i=await r.A.put("/quiz/createQuestion",JSON.stringify({id:t,partName:s,questionType:a,questionContent:n,answers:o}));return 200===i.status&&i.data?i.data.data:{}}catch(t){if(t.response)throw a.Ay.error(t.response.data),new Error(t.response.data)}},c=async e=>{try{const t=await r.A.put("/quiz/updateGeneralInfo",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw a.Ay.error(t.response.data),new Error(t.response.data)}},u=async e=>{try{const t=await r.A.put("/quiz/updateQuestion",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:t}catch(t){if(t.response)throw console.log(t.response),new Error(t.response.data)}},h=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await n.get(`/quiz/preview/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},m=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await r.A.get(`/quiz/forExam/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},x=async e=>{try{const{id:t}=e;if(!t)throw new Error("C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh x\xf3a");const s=await r.A.delete(`/quiz/${t}/deleteQuiz`);return 200===s.status&&s.data?s.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},p=async e=>{try{const{name:t,page:s,limit:a,skip:r,subject:o,topic:i,schoolYear:l,educationLevel:d}=e,c=new URLSearchParams;Object.entries({name:t,page:s,limit:a,skip:r,subject:o,topic:i,schoolYear:l,educationLevel:d}).forEach((e=>{let[t,s]=e;void 0!==s&&c.append(t,String(s))}));const u=await n.get(`/quiz/discovery?${c}`);return 200===u.status&&u.data?u.data.data:[]}catch(t){throw new Error(t.response.data)}}}}]);