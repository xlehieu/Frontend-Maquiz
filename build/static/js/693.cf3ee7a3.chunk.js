"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[693],{3292:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(9324),l=a(4959),i=a(2260),n=a(4414);const r=e=>{let{title:s="TITLE",content:a="This is modal content",onLoading:r,onCancel:o,onOk:d,isShow:c,textButtonHandle:u="X\xf3a",bgColorButtonHandle:h="bg-red-500",className:v="",showFooter:m=!0}=e;return(0,n.jsx)(n.Fragment,{children:c&&(0,n.jsx)("div",{className:"fixed inset-0 z-30",children:(0,n.jsx)("div",{onClick:o,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${v}`,children:[(0,n.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,n.jsx)("h2",{className:"font-medium",children:s}),(0,n.jsx)("button",{className:"px-2 py-2",onClick:o,children:(0,n.jsx)(l.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:t.yYc})})]}),(0,n.jsx)("div",{className:"my-6",children:a}),m&&(0,n.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,n.jsx)("button",{onClick:o,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,n.jsx)("button",{onClick:d,className:`rounded ${h} text-white px-3 py-1 border-2`,children:r?(0,n.jsx)(i.A,{}):u})]})]})})})})}},8693:(e,s,a)=>{a.r(s),a.d(s,{default:()=>z});var t=a(4959),l=a(3491),i=a(9950),n=a(8429),r=a(8740),o=(a(9646),a(9519)),d=a(9324),c=a(8553),u=a(4159),h=a.n(u),v=a(5996),m=a(4967),x=a(4194),p=a(3292),j=a(8091),w=a(3571),g=a(300),f=a(4643),y=a(4414);const N=e=>{var s,a,r,o,u;let{quizDetail:N}=e;const b=(0,n.Zp)(),q=(0,g.wA)(),A=(0,g.d4)((e=>e.user)),k=(0,i.useMemo)((()=>{var e,s;return(null===N||void 0===N||null===(e=N.quiz)||void 0===e?void 0:e.length)>0?null===N||void 0===N||null===(s=N.quiz)||void 0===s?void 0:s.reduce(((e,s)=>{var a;return e+(null===s||void 0===s||null===(a=s.questions)||void 0===a?void 0:a.length)}),0):0}),[N]),z=(0,j.A)((e=>w.a2(e)));(0,i.useEffect)((()=>{z.isSuccess&&(l.Ay.success("\u0110\xe3 th\xeam \u0111\u1ec1 thi v\xe0o m\u1ee5c y\xeau th\xedch! \u2764\ufe0f\u2764\ufe0f\u2764\ufe0f"),z.reset())}),[z.isSuccess]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"px-2 py-2 rounded-sm shadow-md border bg-white",children:[(0,y.jsx)("h6",{className:"font-semibold",children:"Th\xf4ng tin \u0111\u1ec1 thi"}),(0,y.jsxs)("div",{className:"grid grid-cols-3 mt-2 gap-3",children:[(0,y.jsx)("div",{className:"col-span-1",children:(0,y.jsx)(x.A,{alt:null===N||void 0===N?void 0:N.name,src:null===N||void 0===N?void 0:N.thumb,className:"w-full h-full object-cover rounded border"})}),(0,y.jsx)("div",{className:"col-span-1",children:(0,y.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,y.jsx)("p",{className:"font-semibold text-lg",children:null===N||void 0===N?void 0:N.name}),(0,y.jsxs)("div",{className:"mt-2",children:[(0,y.jsx)(x.A,{className:"w-9 h-9 rounded-full overflow-hidden",src:null===N||void 0===N||null===(s=N.user)||void 0===s?void 0:s.avatar,alt:`avatar ${null===N||void 0===N||null===(a=N.user)||void 0===a?void 0:a.name}`}),(0,y.jsx)("p",{className:"inline ml-2",children:null===N||void 0===N||null===(r=N.user)||void 0===r?void 0:r.name})]}),(null===N||void 0===N?void 0:N.createdAt)&&(0,y.jsxs)("div",{className:"mt-2",children:[(0,y.jsx)(t.g,{icon:c.a$,className:"text-lg inline"}),(0,y.jsx)("p",{className:"inline ml-2",children:(null===N||void 0===N?void 0:N.createdAt)&&h()(null===N||void 0===N?void 0:N.createdAt).format("DD/MM/YYYY")})]}),(0,y.jsxs)("div",{className:"mt-2 flex gap-4",children:[(0,y.jsx)(m.A,{content:"S\u1ed1 c\xe2u h\u1ecfi",trigger:"hover",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(t.g,{icon:d.wRm,className:"mr-2 text-yellow-500"}),k]})}),(0,y.jsxs)(m.A,{content:"L\u01b0\u1ee3t thi",trigger:"hover",children:[(0,y.jsx)(t.g,{icon:d.yjc,className:"mr-2 text-green-500"}),null===N||void 0===N?void 0:N.examCount]}),(0,y.jsxs)(m.A,{content:"L\u01b0\u1ee3t truy c\u1eadp",trigger:"hover",children:[(0,y.jsx)(t.g,{icon:d.s67,className:"mr-2 text-blue-500"}),null===N||void 0===N?void 0:N.accessCount]})]}),(null===N||void 0===N?void 0:N.school)&&(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("p",{className:"font-medium",children:["Tr\u01b0\u1eddng h\u1ecdc: ",null===N||void 0===N?void 0:N.school]})})]})}),(0,y.jsx)("div",{className:"col-span-1",children:(0,y.jsxs)("div",{className:"flex flex-col gap-3",children:[N.topic&&(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("p",{className:"font-medium max-h-12 overflow-scroll",children:["Ch\u1ee7 \u0111\u1ec1: ",N.topic]})}),N.schoolYear&&(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("p",{className:"font-medium max-h-12 overflow-scroll",children:["N\u0103m h\u1ecdc: ",N.schoolYear]})}),N.educationLevel&&(null===N||void 0===N||null===(o=N.educationLevel)||void 0===o?void 0:o.length)>0&&(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("p",{className:"font-medium overflow-scroll",children:["Tr\xecnh \u0111\u1ed9:"," ",null===N||void 0===N||null===(u=N.educationLevel)||void 0===u?void 0:u.map(((e,s)=>{var a;return(0,y.jsxs)("span",{children:[e,s<(null===N||void 0===N||null===(a=N.educationLevel)||void 0===a?void 0:a.length)-1&&", "]})}))]})}),N.description&&(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("p",{className:"font-medium max-h-16 overflow-scroll",children:["M\xf4 t\u1ea3: ",N.description]})})]})}),(0,y.jsx)("div",{className:"col-start-2 col-end-2",children:(0,y.jsxs)("button",{onClick:async()=>{b(`${v.HR.takeQuiz}/${null===N||void 0===N?void 0:N.slug}`)},className:"bg-gradient-to-r from-primary to-green-700 text-white rounded hover:opacity-60 duration-300 w-full py-1",children:[(0,y.jsx)(t.g,{icon:d.e74,className:"mr-2"}),"B\u1eaft \u0111\u1ea7u \xf4n thi"]})}),(0,y.jsx)("div",{className:"col-start-3 col-end-3",children:(0,y.jsxs)("button",{onClick:()=>{var e;if(N._id){if(null!==A&&void 0!==A&&null!==(e=A.favoriteQuiz)&&void 0!==e&&e.some((e=>e.slug===N.slug)))return l.Ay.info("\u0110\u1ec1 thi \u0111\xe3 c\xf3 trong danh s\xe1ch y\xeau th\xedch! \u2764\ufe0f\u2764\ufe0f\u2764\ufe0f");z.mutate({id:N._id}),q((0,f.a2)({slug:N.slug}))}},className:"bg-gradient-to-r from-pink-400 to-pink-600 text-white rounded hover:opacity-60 duration-300 w-full py-1",children:[(0,y.jsx)(t.g,{icon:d.qcK,className:"mr-2"}),"Y\xeau th\xedch"]})})]})]}),(0,y.jsx)(p.A,{})]})},b=(0,i.memo)(N);var q=a(1032),A=a(62),k=a(7086);const z=()=>{var e,s,a,c,u,h,v,m,x,p,j,w,g;const{slug:f}=(0,n.g)(),N=(0,k.I)({queryKey:["QueryQuizPreviewBySlug",f],queryFn:()=>o.mU(f)}),[z,C]=(0,i.useState)(1),[E,L]=(0,i.useState)(0);(0,i.useEffect)((()=>{var e;document.title=(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.name)||"Maquiz"}),[N.data]),(0,i.useEffect)((()=>{null!==N&&void 0!==N&&N.isError&&l.Ay.error(N.error.message)}),[N.isError]);const S=[{key:1,label:"N\u1ed9i dung \u0111\u1ec1 thi",icon:d.ReK}],Y={1:(0,y.jsx)(y.Fragment,{children:(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.quiz)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"scrollbar-thumb-white scrollbar-track-white",children:(0,y.jsx)("div",{className:"flex gap-5 overflow-scroll scrollbar-thin pb-4",children:null===N||void 0===N||null===(s=N.data)||void 0===s?void 0:s.quiz.map(((e,s)=>(0,y.jsx)("button",{onClick:()=>L(s),className:"rounded-3xl px-4 py-2 whitespace-nowrap "+(E==s?"bg-primary border-primary text-white":"border-gray-600 text-gray-600"),children:null===e||void 0===e?void 0:e.partName},s)))})}),(0,y.jsx)("div",{className:"relative",children:(null===N||void 0===N||null===(a=N.data)||void 0===a||null===(c=a.quiz[E])||void 0===c?void 0:c.questions)instanceof Array&&(0,y.jsxs)("div",{className:"relative",children:[(null===N||void 0===N||null===(u=N.data)||void 0===u||null===(h=u.quiz[E])||void 0===h||null===(v=h.questions)||void 0===v?void 0:v.length)<=5?(0,y.jsx)("div",{className:"mt-2 h-96 overflow-scroll",children:null===N||void 0===N||null===(m=N.data)||void 0===m||null===(x=m.quiz[E])||void 0===x||null===(p=x.questions)||void 0===p?void 0:p.map(((e,s)=>(0,y.jsxs)("div",{className:"mt-3",children:[(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,r.Ay)(null===e||void 0===e?void 0:e.questionContent)," ",(0,y.jsxs)("p",{className:"ml-1",children:["(",q.kg[null===e||void 0===e?void 0:e.questionType],")"]})]}),(0,y.jsx)("div",{className:"flex flex-wrap flex-col",children:(null===e||void 0===e?void 0:e.answers)&&(null===e||void 0===e?void 0:e.answers.map(((e,s)=>(0,y.jsx)("div",{children:(0,r.Ay)(e.content)},s))))})]},s)))}):(0,y.jsx)("div",{className:"mt-2 h-96 overflow-scroll",children:null===N||void 0===N||null===(j=N.data)||void 0===j||null===(w=j.quiz[E])||void 0===w||null===(g=w.questions)||void 0===g?void 0:g.slice(0,5).map(((e,s)=>(0,y.jsxs)("div",{className:"mt-3",children:[(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,r.Ay)(null===e||void 0===e?void 0:e.questionContent)," ",(0,y.jsxs)("p",{className:"ml-1",children:["(",q.kg[null===e||void 0===e?void 0:e.questionType],")"]})]}),(0,y.jsx)("div",{className:"flex flex-wrap flex-col",children:(null===e||void 0===e?void 0:e.answers)&&(null===e||void 0===e?void 0:e.answers.map(((e,s)=>(0,y.jsx)("div",{children:(0,r.Ay)(e.content)},s))))})]},s)))}),(0,y.jsx)("div",{className:"absolute w-full px-5 py-2 bottom-0 bg-yellow-500",children:(0,y.jsx)("p",{className:"font-bold text-white",children:"B\u1ea1n \u0111ang xem \u1edf ch\u1ebf \u0111\u1ed9 xem tr\u01b0\u1edbc, h\xe3y b\u1eaft \u0111\u1ea7u \xf4n thi n\xe0o!!!"})})]})})]})})};return(0,y.jsx)("div",{className:"w-full",children:N.isLoading?(0,y.jsx)(A.A,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b,{quizDetail:N.data}),(0,y.jsxs)("div",{className:"px-2 py-2 mt-5 rounded shadow-md border bg-white",children:[(0,y.jsx)("div",{className:"flex gap-3 flex-wrap",children:S.map((e=>(0,y.jsxs)("button",{className:(z===e.key?"border-b-4 border-b-primary text-primary cursor-default":"hover:opacity-50 cursor-pointer border-b-4 border-b-white")+" flex flex-wrap tabButtons-center text-lg pb-2 px-1 transition-all duration-200 ease-linear text-gray-500 items-center",onClick:()=>C(e.key),children:[(0,y.jsx)(t.g,{className:"block",icon:e.icon}),(0,y.jsx)("p",{className:"pl-2",children:e.label})]},e.key)))}),(0,y.jsx)("div",{className:"mt-6",children:Y[z]})]})]})})}},9519:(e,s,a)=>{a.d(s,{hG:()=>d,wn:()=>o,hj:()=>m,Wk:()=>x,h3:()=>r,iC:()=>v,mU:()=>h,qY:()=>n,J7:()=>c,z1:()=>u});var t=a(3491),l=a(307);const i=a(9246).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),n=async e=>{try{const a=new URLSearchParams;Object.entries(e).forEach((e=>{let[s,t]=e;void 0!=t&&a.append(s,String(t))}));const t=await l.A.get(`/quiz/mine?${a}`);var s;return 200===t.status&&t.data&&(null!==(s=t.data.data)&&void 0!==s)?s:[]}catch(t){var a;if(console.log(t),t.response)throw new Error(null===(a=t.response)||void 0===a?void 0:a.data)}},r=async e=>{try{const s=await l.A.get(`/quiz/detail?id=${e}`);return 200===s.status&&s.data?s.data.data:{}}catch(s){if(s.response)throw new Error(s.response.data)}},o=async e=>{try{const{name:s,description:a,school:t,subject:i,topic:n,schoolYear:r,educationLevel:o,thumb:d}=e,c=await l.A.post("/quiz/create",JSON.stringify({name:s,description:a,school:t,subject:i,topic:n,schoolYear:r,educationLevel:o,thumb:d}));return 200===c.status&&c.data?c.data.data:{}}catch(s){if(s.response)throw new Error(s.response.data)}},d=async e=>{try{const{id:s,partName:a,questionType:t,questionContent:i,answers:n}=e,r=await l.A.put("/quiz/createQuestion",JSON.stringify({id:s,partName:a,questionType:t,questionContent:i,answers:n}));return 200===r.status&&r.data?r.data.data:{}}catch(s){if(s.response)throw t.Ay.error(s.response.data),new Error(s.response.data)}},c=async e=>{try{const s=await l.A.put("/quiz/updateGeneralInfo",JSON.stringify(e));return 200===s.status&&s.data?s.data.data:{}}catch(s){if(s.response)throw t.Ay.error(s.response.data),new Error(s.response.data)}},u=async e=>{try{const s=await l.A.put("/quiz/updateQuestion",JSON.stringify(e));return 200===s.status&&s.data?s.data.data:s}catch(s){if(s.response)throw console.log(s.response),new Error(s.response.data)}},h=async e=>{try{if(!e)throw new Error("L\u1ed7i");const s=await i.get(`/quiz/preview/${e}`);return 200===s.status&&s.data?s.data.data:{}}catch(s){throw new Error(s.response.data)}},v=async e=>{try{if(!e)throw new Error("L\u1ed7i");const s=await l.A.get(`/quiz/forExam/${e}`);return 200===s.status&&s.data?s.data.data:{}}catch(s){throw new Error(s.response.data)}},m=async e=>{try{const{id:s}=e;if(!s)throw new Error("C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh x\xf3a");const a=await l.A.delete(`/quiz/${s}/deleteQuiz`);return 200===a.status&&a.data?a.data.data:{}}catch(s){if(s.response)throw new Error(s.response.data)}},x=async e=>{try{const{name:s,page:a,limit:t,skip:l,subject:n,topic:r,schoolYear:o,educationLevel:d}=e,c=new URLSearchParams;Object.entries({name:s,page:a,limit:t,skip:l,subject:n,topic:r,schoolYear:o,educationLevel:d}).forEach((e=>{let[s,a]=e;void 0!==a&&c.append(s,String(a))}));const u=await i.get(`/quiz/discovery?${c}`);return 200===u.status&&u.data?u.data.data:[]}catch(s){throw new Error(s.response.data)}}}}]);