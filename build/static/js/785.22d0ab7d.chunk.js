"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[785],{3292:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(9324),a=n(4959),r=n(2260),o=n(4414);const l=e=>{let{title:t="TITLE",content:n="This is modal content",onLoading:l,onCancel:i,onOk:c,isShow:u,textButtonHandle:d="X\xf3a",bgColorButtonHandle:p="bg-red-500",className:m="",showFooter:h=!0}=e;return(0,o.jsx)(o.Fragment,{children:u&&(0,o.jsx)("div",{className:"fixed inset-0 z-30",children:(0,o.jsx)("div",{onClick:i,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${m}`,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,o.jsx)("h2",{className:"font-medium",children:t}),(0,o.jsx)("button",{className:"px-2 py-2",onClick:i,children:(0,o.jsx)(a.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:s.yYc})})]}),(0,o.jsx)("div",{className:"my-6",children:n}),h&&(0,o.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,o.jsx)("button",{onClick:i,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,o.jsx)("button",{onClick:c,className:`rounded ${p} text-white px-3 py-1 border-2`,children:l?(0,o.jsx)(r.A,{}):d})]})]})})})})}},243:(e,t,n)=>{n.d(t,{A:()=>s});const s={askBeforePasteHTML:!1,defaultActionOnPaste:"insert_only_text",buttons:["bold","italic","fontsize","font","brush"],toolbarAdaptive:!1}},9785:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var s=n(7086),a=n(9950);function r(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0};class d extends a.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((()=>{this.reCalculateColumnCount()}))):this.reCalculateColumnCount()}reCalculateColumnCount(){const e=window&&window.innerWidth||1/0;let t=this.props.breakpointCols;"object"!==typeof t&&(t={default:parseInt(t)||2});let n=1/0,s=t.default||2;for(let a in t){const r=parseInt(a);r>0&&e<=r&&r<n&&(n=r,s=t[a])}s=Math.max(1,parseInt(s)||1),this.state.columnCount!==s&&this.setState({columnCount:s})}itemsInColumns(){const e=this.state.columnCount,t=new Array(e),n=a.Children.toArray(this.props.children);for(let s=0;s<n.length;s++){const a=s%e;t[a]||(t[a]=[]),t[a].push(n[s])}return t}renderColumns(){const{column:e,columnAttrs:t={},columnClassName:n}=this.props,s=this.itemsInColumns(),r=100/s.length+"%";let l=n;l&&"string"!==typeof l&&(this.logDeprecated('The property "columnClassName" requires a string'),"undefined"===typeof l&&(l="my-masonry-grid_column"));const c=i(i(i({},e),t),{},{style:i(i({},t.style),{},{width:r}),className:l});return s.map(((e,t)=>a.createElement("div",o({},c,{key:t}),e)))}logDeprecated(e){console.error("[Masonry]",e)}render(){const e=this.props,{children:t,breakpointCols:n,columnClassName:s,columnAttrs:l,column:i,className:c}=e,u=r(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let d=c;return"string"!==typeof c&&(this.logDeprecated('The property "className" requires a string'),"undefined"===typeof c&&(d="my-masonry-grid")),a.createElement("div",o({},u,{className:d}),this.renderColumns())}}d.defaultProps=u;const p=d;var m=n(8740),h=n(307);var y=n(4959),x=n(9324),f=n(8091),w=n(3491),b=n(4967),C=n(243),g=n(4554),j=n.n(g),v=n(3292),N=n(4414);const A="SET_NEWS",O="UPDATE",k="DELETE",S=(e,t)=>{switch(t.type){case A:return[...t.payload];case O:return e.map((e=>e._id===t.payload._id?t.payload:e));case k:return e.filter((e=>e._id!==t.payload.id));default:return e}},E=(0,a.createContext)(),P=e=>{let{children:t}=e;const n=(0,s.I)({queryKey:["news"],queryFn:()=>(async()=>{try{const e=await h.A.get("/news");if(e.data&&200===e.status)return e.data.data;throw new Error("Failed to fetch news")}catch(e){throw e}})()}),[r,o]=(0,a.useReducer)(S,[]);return(0,a.useEffect)((()=>{n.data&&o({type:A,payload:n.data})}),[n.data]),(0,N.jsx)(E.Provider,{value:{news:r,dispatchNews:o},children:t})},_=e=>{let{news:t,isOpenModal:n,currentId:s}=e;const{dispatchNews:r}=(0,a.useContext)(E),[o,l]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),v=(0,f.A)((e=>(async e=>{let{id:t,title:n,content:s}=e;try{const e=await h.A.put(`/news/${t}`,{title:n,content:s});if(e.data&&200===e.status)return e.data.data;throw new Error("Failed to update news")}catch(a){throw a}})(e)));(0,a.useEffect)((()=>{v.isSuccess&&(w.Ay.success("C\u1eadp nh\u1eadt b\xe0i vi\u1ebft th\xe0nh c\xf4ng"),r({type:O,payload:v.data}),v.reset())}),[v.isSuccess,v.data]);return(0,N.jsxs)("div",{className:"border-2 rounded-lg px-2 py-2 mb-4 overflow-scroll max-h-[500px]",children:[(0,N.jsx)(b.A,{content:(0,N.jsx)("div",{className:"flex flex-col gap-2",children:i?(0,N.jsxs)("button",{className:"text-yellow-400",onClick:()=>{c(!1),l(!1),d(""),g("")},children:[(0,N.jsx)(y.g,{className:"mr-1",icon:x.CeG}),"Quay l\u1ea1i"]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("button",{className:"text-yellow-400",onClick:()=>{l(!1),d(t.title),g(t.content),c(!0)},children:[(0,N.jsx)(y.g,{className:"mr-1",icon:x.hpd}),"S\u1eeda"]}),(0,N.jsxs)("button",{className:"text-red-400",onClick:()=>{l(!1),n(!0),s(t._id)},children:[(0,N.jsx)(y.g,{className:"mr-1",icon:x.yLS}),"X\xf3a"]})]})}),trigger:"click",open:o,onOpenChange:e=>{l(e)},placement:"left",className:" float-right top-2 right-2 px-2 py-2 hover:cursor-pointer",children:(0,N.jsx)(y.g,{className:"text-primary",icon:x.nx5})}),i?(0,N.jsxs)("div",{className:"flex flex-col gap-2 w-11/12 py-3",children:[(0,N.jsx)("input",{type:"text",placeholder:"Ti\xeau \u0111\u1ec1",value:u,onChange:e=>d(e.target.value),className:"border-2 rounded-lg px-2 py-1"}),(0,N.jsx)(j(),{config:{...C.A,defaultActionOnPaste:"insert_as_html",placeholder:"N\u1ed9i dung"},value:p,onBlur:e=>g(e)}),(0,N.jsxs)("button",{onClick:()=>{if(!p)return w.Ay.warning("Nh\u1eadp ti\xeau \u0111\u1ec1 v\xe0 n\u1ed9i dung h\u1ed9 c\xe1i\ud83d\ude42\ud83d\ude42\ud83d\ude42\ud83d\ude42");v.mutate({id:t._id,title:u,content:p}),d(""),g(""),c(!1)},className:"bg-primary text-white px-4 py-2 rounded-lg",children:[(0,N.jsx)(y.g,{icon:x.us_,className:"mr-1"}),"S\u1eeda"]})]}):(0,N.jsxs)(N.Fragment,{children:[t.title&&(0,N.jsx)("h4",{children:null===t||void 0===t?void 0:t.title}),t.content&&(0,N.jsx)("div",{children:(0,m.Ay)(null===t||void 0===t?void 0:t.content)})]})]})},F=()=>{const{news:e,dispatchNews:t}=(0,a.useContext)(E),[n,s]=(0,a.useState)(!1),r=n?"div":"button",[o,l]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),[m,b]=(0,a.useState)(""),g=(0,f.A)((e=>(async e=>{let{title:t,content:n}=e;try{const e=await h.A.post("/news",{title:t,content:n});if(e.data&&200===e.status)return e.data.data;throw new Error("Failed to create news")}catch(s){throw s}})(e)));(0,a.useEffect)((()=>{g.isSuccess&&(w.Ay.success("T\u1ea1o b\xe0i vi\u1ebft th\xe0nh c\xf4ng"),t({type:A,payload:[...e,g.data]}),g.reset())}),[g.isSuccess]);const O=(0,f.A)((e=>(async e=>{try{const t=await h.A.delete(`/news/${e}`);if(t.data&&200===t.status)return t.data.data;throw new Error("Failed to delete news")}catch(t){throw t}})(e)));return(0,a.useEffect)((()=>{O.isSuccess&&(w.Ay.success("X\xf3a b\xe0i vi\u1ebft th\xe0nh c\xf4ng"),t({type:k,payload:{id:m}}),O.reset())}),[O.isSuccess,O.data]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p,{breakpointCols:{default:3,1100:3,700:2},className:"my-masonry-grid flex gap-4 py-5",columnClassName:"my-masonry-grid_column",children:[(0,N.jsx)(r,{onClick:()=>{n||s(!0)},className:"border-2 rounded-lg flex w-full justify-center min-h-[230px] items-center bg-white mb-4",children:n?(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"flex flex-col gap-2 w-11/12 py-3",children:[(0,N.jsx)("input",{type:"text",placeholder:"Ti\xeau \u0111\u1ec1",value:o,onChange:e=>l(e.target.value),className:"border-2 rounded-lg px-2 py-1"}),(0,N.jsx)(j(),{config:{...C.A,defaultActionOnPaste:"insert_as_html",placeholder:"N\u1ed9i dung"},value:i,onBlur:e=>c(e)}),(0,N.jsxs)("button",{onClick:()=>{if(!i)return w.Ay.warning("Nh\u1eadp ti\xeau \u0111\u1ec1 v\xe0 n\u1ed9i dung h\u1ed9 c\xe1i\ud83d\ude42\ud83d\ude42\ud83d\ude42\ud83d\ude42");g.mutate({title:o,content:i}),l(""),c(""),s(!1)},className:"bg-primary text-white px-4 py-2 rounded-lg",children:[(0,N.jsx)(y.g,{icon:x.us_,className:"mr-1"}),"T\u1ea1o"]})]})}):(0,N.jsx)(y.g,{icon:x.q_k,className:"text-5xl text-yellow-400"})}),e.map(((e,t)=>(0,N.jsx)(_,{news:e,isOpenModal:d,currentId:b},t)))]}),(0,N.jsx)(v.A,{isShow:u,onCancel:()=>d(!1),onOk:()=>{O.mutate(m),d(!1)},title:"X\xf3a b\xe0i n\xe0y?",content:"B\u1ea1n ch\u1eafc ch\u1eafn v\u1ec1 quy\u1ebft \u0111\u1ecbnh n\xe0y ch\u1ee9"})]})},D=()=>(0,N.jsx)(P,{children:(0,N.jsx)(F,{})})}}]);