"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[429],{3292:(e,t,l)=>{l.d(t,{A:()=>n});var s=l(9324),o=l(4959),a=l(2260),r=l(4414);const n=e=>{let{title:t="TITLE",content:l="This is modal content",onLoading:n,onCancel:i,onOk:d,isShow:c,textButtonHandle:u="X\xf3a",bgColorButtonHandle:m="bg-red-500",className:h="",showFooter:x=!0}=e;return(0,r.jsx)(r.Fragment,{children:c&&(0,r.jsx)("div",{className:"fixed inset-0 z-30",children:(0,r.jsx)("div",{onClick:i,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${h}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,r.jsx)("h2",{className:"font-medium",children:t}),(0,r.jsx)("button",{className:"px-2 py-2",onClick:i,children:(0,r.jsx)(o.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:s.yYc})})]}),(0,r.jsx)("div",{className:"my-6",children:l}),x&&(0,r.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,r.jsx)("button",{onClick:i,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,r.jsx)("button",{onClick:d,className:`rounded ${m} text-white px-3 py-1 border-2`,children:n?(0,r.jsx)(a.A,{}):u})]})]})})})})}},5429:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var s=l(9324),o=l(4959),a=l(8287),r=l(3491),n=l(9950),i=l(2074),d=l(8429),c=l(3292),u=l(8091),m=l(6188),h=l(2260),x=l(5996),p=l(7086),v=l(4194),f=l(1032),b=l(4414);const g=(0,n.createContext)(),j=(0,n.createContext)(),w=(0,n.createContext)(),y=(0,n.createContext)(),N=e=>{let{children:t}=e;const[l,s]=(0,n.useState)(!1),[o,a]=(0,n.useState)(""),[r,i]=(0,n.useState)((0,b.jsx)(b.Fragment,{})),[d,c]=(0,n.useState)("");return(0,b.jsx)(j.Provider,{value:{isShowModal:l,setIsShowModal:s,titleModal:o,setTitleModal:a,contentModal:r,setContentModal:i,textHandleModal:d,setTextHandleModal:c},children:t})},C=e=>{let{children:t}=e;const[l,s]=(0,n.useState)(""),[o,a]=(0,n.useState)("");return(0,b.jsx)(g.Provider,{value:{classroomName:l,setClassroomName:s,subjectName:o,setSubjectName:a},children:t})},S=e=>{let{children:t}=e;const{data:l,isLoading:s,error:o}=(0,p.I)({queryKey:["userClassroom"],queryFn:()=>m.Uz(),refetchOnWindowFocus:!0});return(0,b.jsx)(w.Provider,{value:{classList:l,isLoadingQuery:s},children:t})},k=e=>{let{children:t}=e;const[l,s]=(0,n.useState)("");return(0,b.jsx)(y.Provider,{value:{classCode:l,setClassCode:s},children:t})},A=e=>{var t,l,s,o,a,r,n,d;let{classroom:c,isMyClassroom:u=!1}=e;return(0,b.jsxs)("div",{className:"w-full bg-white transition-all block duration-300 border-2 border-gray-200 rounded-lg overflow-hidden pb-3 hover:drop-shadow-lg relative h-56",children:[null!==c&&void 0!==c&&c.thumb?(0,b.jsx)(v.A,{alt:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"classroom image",src:null===c||void 0===c?void 0:c.thumb,className:"w-full h-20 opacity-60"}):(0,b.jsx)(v.A,{alt:null!==(l=null===c||void 0===c?void 0:c.name)&&void 0!==l?l:"classroom image",src:f.$k,className:"w-full h-20 opacity-60"}),(0,b.jsxs)("div",{className:"relative h-12",children:[(null===c||void 0===c||null===(s=c.teacher)||void 0===s?void 0:s.avatar)&&(0,b.jsx)(v.A,{alt:null!==(o=null===c||void 0===c||null===(a=c.teacher)||void 0===a?void 0:a.name)&&void 0!==o?o:"teacher image",src:null===c||void 0===c||null===(r=c.teacher)||void 0===r?void 0:r.avatar,className:"w-12 h-full rounded-full overflow-hidden absolute z-0 -top-1/2 right-3"}),(null===c||void 0===c?void 0:c.name)&&(0,b.jsx)(i.N_,{to:`${x.tX.classroom}/${null===c||void 0===c?void 0:c.classCode}`,className:"z-10 text-2xl text-gray-700 font-normal ml-3 line-clamp-1 hover:underline",children:null===c||void 0===c?void 0:c.name})]}),!u&&(null===c||void 0===c||null===(n=c.teacher)||void 0===n?void 0:n.name)&&(0,b.jsx)("div",{className:"z-10 text-xl md:text-lg absolute bottom-2 text-black font-light ml-3 line-clamp-1",children:null===c||void 0===c||null===(d=c.teacher)||void 0===d?void 0:d.name})]})},M=()=>{var e,t,l,s;const{classList:o}=(0,n.useContext)(w);return(0,b.jsxs)(b.Fragment,{children:[(null===o||void 0===o||null===(e=o.myClassrooms)||void 0===e?void 0:e.length)>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-4",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"L\u1edbp h\u1ecdc c\u1ee7a t\xf4i"})}),(0,b.jsx)("div",{className:"w-full grid gap-3 grid-cols-2 md:grid-cols-3 2xl:grid-cols-4",children:null===o||void 0===o||null===(t=o.myClassrooms)||void 0===t?void 0:t.map(((e,t)=>(0,b.jsx)("div",{children:(0,b.jsx)(A,{isMyClassroom:!0,classroom:e})},t)))})]}),(null===o||void 0===o||null===(l=o.enrolledClassrooms)||void 0===l?void 0:l.length)>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-4",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"L\u1edbp h\u1ecdc \u0111ang tham gia"})}),(0,b.jsx)("div",{className:"w-full grid gap-3 grid-cols-2 md:grid-cols-3 2xl:grid-cols-4",children:null===o||void 0===o||null===(s=o.enrolledClassrooms)||void 0===s?void 0:s.map(((e,t)=>(0,b.jsx)("div",{children:(0,b.jsx)(A,{classroom:e})},t)))})]})]})},T=()=>{const e=(0,d.Zp)(),{setIsShowModal:t}=(0,n.useContext)(j),{classCode:l,setClassCode:s}=(0,n.useContext)(y),o=(0,u.A)((e=>m.Zc(e)));return(0,n.useEffect)((()=>{o.isError?r.Ay.error(null===o||void 0===o?void 0:o.error.message):o.isSuccess&&(r.Ay.success("Tham gia l\u1edbp h\u1ecdc th\xe0nh c\xf4ng"),e(`${x.tX.classroom}/${l}`))}),[o.isError,o.isSuccess]),(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("input",{type:"text",id:"classroomCode",placeholder:" ",value:l,onChange:e=>s(e.target.value),className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all"}),(0,b.jsx)("label",{htmlFor:"classroomCode",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"M\xe3 l\u1edbp"})]}),(0,b.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>t(!1),className:"text-blue-500 px-2 py-1 font-semibold",children:"H\u1ee7y"}),(0,b.jsx)("button",{onClick:()=>{if(null===l||void 0===l||!l.trim())return r.Ay.error("Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp h\u1ecdc");o.mutate({classCode:l})},className:(null!==l&&void 0!==l&&l.trim()?"text-blue-500":"text-gray-400")+" font-semibold px-2 py-1 ",children:o.isPending?(0,b.jsx)(h.A,{}):"Tham gia"})]})]})},E=()=>{const e=(0,d.Zp)(),{setIsShowModal:t}=(0,n.useContext)(j),{classroomName:l,setClassroomName:s,subjectName:o,setSubjectName:a}=(0,n.useContext)(g),i=(0,u.A)((e=>m.ot(e)));return(0,n.useEffect)((()=>{var l;i.isSuccess?(r.Ay.success("T\u1ea1o l\u1edbp h\u1ecdc th\xe0nh c\xf4ng"),t(!1),s(""),a(""),e(`${x.tX.classroom}/${null===(l=i.data)||void 0===l?void 0:l.classCode}`)):i.isError&&r.Ay.error("T\u1ea1o l\u1edbp h\u1ecdc th\u1ea5t b\u1ea1i")}),[i.isError,i.isSuccess]),(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("input",{type:"text",id:"classroomName",placeholder:" ",autoComplete:"off",className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all",value:l,onChange:e=>s(e.target.value)}),(0,b.jsx)("label",{htmlFor:"classroomName",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"T\xean l\u1edbp"})]}),(0,b.jsxs)("div",{className:"relative w-full mt-5",children:[(0,b.jsx)("input",{type:"text",id:"classroomSubject",placeholder:" ",autoComplete:"off",className:"peer w-full border-2 border-gray-300 rounded-md px-4 pt-4 pb-2 text-base outline-none focus:border-primary transition-all",value:o,onChange:e=>a(e.target.value)}),(0,b.jsx)("label",{htmlFor:"classroomSubject",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base transition-all cursor-text peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-xs peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-focus:text-primary bg-white px-1",children:"M\xf4n h\u1ecdc"})]}),(0,b.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>t(!1),className:"rounded bg-white px-3 py-1 border-2",children:"H\u1ee7y"}),(0,b.jsx)("button",{disabled:!(null!==l&&void 0!==l&&l.trim())||!(null!==o&&void 0!==o&&o.trim()),onClick:()=>{if(null===l||void 0===l||!l.trim()||null===o||void 0===o||!o.trim())return r.Ay.warning("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin");i.mutate({classroomName:l,subjectName:o})},className:`${!(null!==l&&void 0!==l&&l.trim())||!(null!==o&&void 0!==o&&o.trim())&&"opacity-25"}rounded bg-primary text-white px-3 py-1 border-2`,children:i.isPending?(0,b.jsx)(h.A,{}):"T\u1ea1o l\u1edbp h\u1ecdc"})]})]})},H=[{title:"Tham gia l\u1edbp h\u1ecdc",content:(0,b.jsx)(T,{}),textHandleButton:"Tham gia"},{title:"T\u1ea1o l\u1edbp h\u1ecdc",content:(0,b.jsx)(E,{}),textHandleButton:"T\u1ea1o l\u1edbp h\u1ecdc"}],F=()=>{const{isShowModal:e,setIsShowModal:t,titleModal:l,setTitleModal:r,contentModal:i,setContentModal:d,textHandleModal:u,setTextHandleModal:m}=(0,n.useContext)(j);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex justify-between my-5 w-full",children:(0,b.jsx)("h4",{className:"font-medium text-gray-500",children:"L\u1edbp h\u1ecdc"})}),(0,b.jsxs)("section",{className:"w-full min-h-screen bg-white px-8 rounded-xl shadow-lg flex flex-col",children:[(0,b.jsx)("div",{className:"w-full border-b flex justify-end",children:(0,b.jsx)(a.Ay,{interactive:!0,hideOnClick:"toggle",placement:"bottom-end",offset:[10,-10],content:(0,b.jsx)("div",{className:"flex flex-col shadow-md bg-white",tabIndex:"-1",children:H.map(((e,l)=>(0,b.jsx)("button",{onClick:()=>{return l=e.title,s=e.content,o=e.textHandleButton,r(l),d(s),m(o),void t(!0);var l,s,o},className:"text-gray-600 duration-200 px-4 py-2 text-left hover:rounded hover:bg-black hover:bg-opacity-5",children:null===e||void 0===e?void 0:e.title},l)))}),children:(0,b.jsx)("button",{className:"mr-3 px-2 py-2",children:(0,b.jsx)(o.g,{icon:s.QLR,className:"text-3xl md:text-xl text-gray-500"})})})}),(0,b.jsx)(M,{})]}),(0,b.jsx)(c.A,{className:"w-1/2",title:l,content:i,textButtonHandle:u,onCancel:()=>t(!1),bgColorButtonHandle:"bg-primary",isShow:e,showFooter:!1})]})},L=()=>(0,b.jsx)(N,{children:(0,b.jsx)(C,{children:(0,b.jsx)(S,{children:(0,b.jsx)(k,{children:(0,b.jsx)(F,{})})})})})},6188:(e,t,l)=>{l.d(t,{H8:()=>i,Pc:()=>r,Uz:()=>a,Zc:()=>n,ot:()=>o});var s=l(307);const o=async e=>{try{var t;const{classroomName:l,subjectName:o}=e;if(null===l||void 0===l||!l.trim()||null===o||void 0===o||!o.trim())throw new Error("T\xean l\u1edbp h\u1ecdc v\xe0 t\xean m\xf4n h\u1ecdc kh\xf4ng th\u1ec3 b\u1ecf tr\u1ed1ng");const a=await s.A.post("/classroom/create",JSON.stringify({name:l,subject:o}));return a.data?null===(t=a.data)||void 0===t?void 0:t.data:null}catch(a){var l,o;if(a.response)throw new Error(null===(l=a.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)}},a=async()=>{try{var e;const t=await s.A.get("/classroom/mine");return t.data?null===(e=t.data)||void 0===e?void 0:e.data:null}catch(o){var t,l;if(o.response)throw new Error(null===o||void 0===o||null===(t=o.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)}},r=async e=>{try{const{classCode:t}=e,l=new URLSearchParams;if(Object.entries({classCode:t}).forEach((e=>{let[t,s]=e;void 0!==s&&l.append(t,String(s))})),null===t||void 0===t||!t.trim())throw new Error("L\u1ed7i");const o=await s.A.get(`/classroom/detail?${l}`);return 200===o.status&&o.data?o.data.data:null}catch(o){var t,l;if(o.response)throw new Error(null===o||void 0===o||null===(t=o.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)}},n=async e=>{try{const{classCode:t}=e;if(null===t||void 0===t||!t.trim())throw new Error("Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp");const l=await s.A.patch("/classroom/enroll",JSON.stringify({classCode:t}));return 200===l.status&&l.data?l.data.data:null}catch(l){var t;if(l.response)throw new Error(null===l||void 0===l||null===(t=l.response)||void 0===t?void 0:t.data.message)}},i=async e=>{try{const{classCode:t,name:l,subject:o,thumb:a}=e;if(null===t||void 0===t||!t.trim())throw new Error("Vui l\xf2ng nh\u1eadp m\xe3 l\u1edbp");if(null===l||void 0===l||!l.trim()||null===o||void 0===o||!o.trim())throw new Error("T\xean l\u1edbp h\u1ecdc v\xe0 t\xean m\xf4n h\u1ecdc kh\xf4ng th\u1ec3 b\u1ecf tr\u1ed1ng");const r=await s.A.patch("/classroom/info",JSON.stringify({classCode:t,name:l,subject:o,thumb:a}));return 200===r.status&&r.data?r.data.data:null}catch(l){var t;if(l.response)throw new Error(null===l||void 0===l||null===(t=l.response)||void 0===t?void 0:t.data.message)}}}}]);