(self.webpackChunkclient=self.webpackChunkclient||[]).push([[693],{3292:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(9324),n=s(4959),a=s(2260),r=s(4414);const o=e=>{let{title:t="TITLE",content:s="This is modal content",onLoading:o,onCancel:l,onOk:c,isShow:d,textButtonHandle:u="X\xf3a",bgColorButtonHandle:h="bg-red-500",className:v="",showFooter:m=!0}=e;return(0,r.jsx)(r.Fragment,{children:d&&(0,r.jsx)("div",{className:"fixed inset-0 z-30",children:(0,r.jsx)("div",{onClick:l,className:"flex justify-center items-start bg-black bg-opacity-45 min-h-screen",children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:`absolute px-5 py-3 top-20 min-w-full md:min-w-96 flex flex-col shadow-lg rounded bg-white ${v}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b",children:[(0,r.jsx)("h2",{className:"font-medium",children:t}),(0,r.jsx)("button",{className:"px-2 py-2",onClick:l,children:(0,r.jsx)(n.g,{className:"text-2xl md:text-xl font-normal text-gray-400",icon:i.yYc})})]}),(0,r.jsx)("div",{className:"my-6",children:s}),m&&(0,r.jsxs)("div",{className:"border-t flex justify-end pt-3 space-x-2",children:[(0,r.jsx)("button",{onClick:l,className:"rounded bg-white px-3 py-1 border-2",children:"Cancel"}),(0,r.jsx)("button",{onClick:c,className:`rounded ${h} text-white px-3 py-1 border-2`,children:o?(0,r.jsx)(a.A,{}):u})]})]})})})})}},8693:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var i=s(4959),n=s(3491),a=s(9950),r=s(8429),o=s(8740),l=(s(9646),s(9519)),c=s(9324),d=s(8553),u=s(4159),h=s.n(u),v=s(5996),m=s(4967),f=s(4194),p=s(3292),x=s(8091),g=s(3571),y=s(300),j=s(4643),w=s(4414);const N=e=>{var t,s,o,l,u;let{quizDetail:N}=e;const b=(0,r.Zp)(),_=(0,y.wA)(),A=(0,y.d4)((e=>e.user)),k=(0,a.useMemo)((()=>{var e,t;return(null===N||void 0===N||null===(e=N.quiz)||void 0===e?void 0:e.length)>0?null===N||void 0===N||null===(t=N.quiz)||void 0===t?void 0:t.reduce(((e,t)=>{var s;return e+(null===t||void 0===t||null===(s=t.questions)||void 0===s?void 0:s.length)}),0):0}),[N]),q=(0,x.A)((e=>g.a2(e)));(0,a.useEffect)((()=>{q.isSuccess&&(n.Ay.success("\u0110\xe3 th\xeam \u0111\u1ec1 thi v\xe0o m\u1ee5c y\xeau th\xedch! \u2764\ufe0f\u2764\ufe0f\u2764\ufe0f"),q.reset())}),[q.isSuccess]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"px-2 py-2 rounded-sm shadow-md border bg-white",children:[(0,w.jsx)("h6",{className:"font-semibold",children:"Th\xf4ng tin \u0111\u1ec1 thi"}),(0,w.jsxs)("div",{className:"grid grid-cols-3 mt-2 gap-3",children:[(0,w.jsx)("div",{className:"col-span-1",children:(0,w.jsx)(f.A,{alt:null===N||void 0===N?void 0:N.name,src:null===N||void 0===N?void 0:N.thumb,className:"w-full h-full object-cover rounded border"})}),(0,w.jsx)("div",{className:"col-span-1",children:(0,w.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,w.jsx)("p",{className:"font-semibold text-lg",children:null===N||void 0===N?void 0:N.name}),(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsx)(f.A,{className:"w-9 h-9 rounded-full overflow-hidden",src:null===N||void 0===N||null===(t=N.user)||void 0===t?void 0:t.avatar,alt:`avatar ${null===N||void 0===N||null===(s=N.user)||void 0===s?void 0:s.name}`}),(0,w.jsx)("p",{className:"inline ml-2",children:null===N||void 0===N||null===(o=N.user)||void 0===o?void 0:o.name})]}),(null===N||void 0===N?void 0:N.createdAt)&&(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsx)(i.g,{icon:d.a$,className:"text-lg inline"}),(0,w.jsx)("p",{className:"inline ml-2",children:(null===N||void 0===N?void 0:N.createdAt)&&h()(null===N||void 0===N?void 0:N.createdAt).format("DD/MM/YYYY")})]}),(0,w.jsxs)("div",{className:"mt-2 flex gap-4",children:[(0,w.jsx)(m.A,{content:"S\u1ed1 c\xe2u h\u1ecfi",trigger:"hover",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.g,{icon:c.wRm,className:"mr-2 text-yellow-500"}),k]})}),(0,w.jsxs)(m.A,{content:"L\u01b0\u1ee3t thi",trigger:"hover",children:[(0,w.jsx)(i.g,{icon:c.yjc,className:"mr-2 text-green-500"}),null===N||void 0===N?void 0:N.examCount]}),(0,w.jsxs)(m.A,{content:"L\u01b0\u1ee3t truy c\u1eadp",trigger:"hover",children:[(0,w.jsx)(i.g,{icon:c.s67,className:"mr-2 text-blue-500"}),null===N||void 0===N?void 0:N.accessCount]})]}),(null===N||void 0===N?void 0:N.school)&&(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("p",{className:"font-medium",children:["Tr\u01b0\u1eddng h\u1ecdc: ",null===N||void 0===N?void 0:N.school]})})]})}),(0,w.jsx)("div",{className:"col-span-1",children:(0,w.jsxs)("div",{className:"flex flex-col gap-3",children:[N.topic&&(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("p",{className:"font-medium max-h-12 overflow-scroll",children:["Ch\u1ee7 \u0111\u1ec1: ",N.topic]})}),N.schoolYear&&(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("p",{className:"font-medium max-h-12 overflow-scroll",children:["N\u0103m h\u1ecdc: ",N.schoolYear]})}),N.educationLevel&&(null===N||void 0===N||null===(l=N.educationLevel)||void 0===l?void 0:l.length)>0&&(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("p",{className:"font-medium overflow-scroll",children:["Tr\xecnh \u0111\u1ed9:"," ",null===N||void 0===N||null===(u=N.educationLevel)||void 0===u?void 0:u.map(((e,t)=>{var s;return(0,w.jsxs)("span",{children:[e,t<(null===N||void 0===N||null===(s=N.educationLevel)||void 0===s?void 0:s.length)-1&&", "]})}))]})}),N.description&&(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsxs)("p",{className:"font-medium max-h-16 overflow-scroll",children:["M\xf4 t\u1ea3: ",N.description]})})]})}),(0,w.jsx)("div",{className:"col-start-2 col-end-2",children:(0,w.jsxs)("button",{onClick:async()=>{b(`${v.HR.takeQuiz}/${null===N||void 0===N?void 0:N.slug}`)},className:"bg-gradient-to-r from-primary to-green-700 text-white rounded hover:opacity-60 duration-300 w-full py-1",children:[(0,w.jsx)(i.g,{icon:c.e74,className:"mr-2"}),"B\u1eaft \u0111\u1ea7u \xf4n thi"]})}),(0,w.jsx)("div",{className:"col-start-3 col-end-3",children:(0,w.jsxs)("button",{onClick:()=>{var e;if(N._id){if(null!==A&&void 0!==A&&null!==(e=A.favoriteQuiz)&&void 0!==e&&e.some((e=>e.slug===N.slug)))return n.Ay.info("\u0110\u1ec1 thi \u0111\xe3 c\xf3 trong danh s\xe1ch y\xeau th\xedch! \u2764\ufe0f\u2764\ufe0f\u2764\ufe0f");q.mutate({id:N._id}),_((0,j.a2)({slug:N.slug}))}},className:"bg-gradient-to-r from-pink-400 to-pink-600 text-white rounded hover:opacity-60 duration-300 w-full py-1",children:[(0,w.jsx)(i.g,{icon:c.qcK,className:"mr-2"}),"Y\xeau th\xedch"]})})]})]}),(0,w.jsx)(p.A,{})]})},b=(0,a.memo)(N);var _=s(1032),A=s(62),k=s(7086);const q=()=>{var e,t,s,d,u,h,v,m,f,p,x,g,y;const{slug:j}=(0,r.g)(),N=(0,k.I)({queryKey:["QueryQuizPreviewBySlug",j],queryFn:()=>l.mU(j)}),[q,z]=(0,a.useState)(1),[C,S]=(0,a.useState)(0);(0,a.useEffect)((()=>{var e;document.title=(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.name)||"Maquiz"}),[N.data]),(0,a.useEffect)((()=>{null!==N&&void 0!==N&&N.isError&&n.Ay.error(N.error.message)}),[N.isError]);const E=[{key:1,label:"N\u1ed9i dung \u0111\u1ec1 thi",icon:c.ReK}],L={1:(0,w.jsx)(w.Fragment,{children:(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.quiz)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"scrollbar-thumb-white scrollbar-track-white",children:(0,w.jsx)("div",{className:"flex gap-5 overflow-scroll scrollbar-thin pb-4",children:null===N||void 0===N||null===(t=N.data)||void 0===t?void 0:t.quiz.map(((e,t)=>(0,w.jsx)("button",{onClick:()=>S(t),className:"rounded-3xl px-4 py-2 whitespace-nowrap "+(C==t?"bg-primary border-primary text-white":"border-gray-600 text-gray-600"),children:null===e||void 0===e?void 0:e.partName},t)))})}),(0,w.jsx)("div",{className:"relative",children:(null===N||void 0===N||null===(s=N.data)||void 0===s||null===(d=s.quiz[C])||void 0===d?void 0:d.questions)instanceof Array&&(0,w.jsxs)("div",{className:"relative",children:[(null===N||void 0===N||null===(u=N.data)||void 0===u||null===(h=u.quiz[C])||void 0===h||null===(v=h.questions)||void 0===v?void 0:v.length)<=5?(0,w.jsx)("div",{className:"mt-2 h-96 overflow-scroll",children:null===N||void 0===N||null===(m=N.data)||void 0===m||null===(f=m.quiz[C])||void 0===f||null===(p=f.questions)||void 0===p?void 0:p.map(((e,t)=>(0,w.jsxs)("div",{className:"mt-3",children:[(0,w.jsxs)("div",{className:"flex flex-wrap",children:[(0,o.Ay)(null===e||void 0===e?void 0:e.questionContent)," ",(0,w.jsxs)("p",{className:"ml-1",children:["(",_.kg[null===e||void 0===e?void 0:e.questionType],")"]})]}),(0,w.jsx)("div",{className:"flex flex-wrap flex-col",children:(null===e||void 0===e?void 0:e.answers)&&(null===e||void 0===e?void 0:e.answers.map(((e,t)=>(0,w.jsx)("div",{children:(0,o.Ay)(e.content)},t))))})]},t)))}):(0,w.jsx)("div",{className:"mt-2 h-96 overflow-scroll",children:null===N||void 0===N||null===(x=N.data)||void 0===x||null===(g=x.quiz[C])||void 0===g||null===(y=g.questions)||void 0===y?void 0:y.slice(0,5).map(((e,t)=>(0,w.jsxs)("div",{className:"mt-3",children:[(0,w.jsxs)("div",{className:"flex flex-wrap",children:[(0,o.Ay)(null===e||void 0===e?void 0:e.questionContent)," ",(0,w.jsxs)("p",{className:"ml-1",children:["(",_.kg[null===e||void 0===e?void 0:e.questionType],")"]})]}),(0,w.jsx)("div",{className:"flex flex-wrap flex-col",children:(null===e||void 0===e?void 0:e.answers)&&(null===e||void 0===e?void 0:e.answers.map(((e,t)=>(0,w.jsx)("div",{children:(0,o.Ay)(e.content)},t))))})]},t)))}),(0,w.jsx)("div",{className:"absolute w-full px-5 py-2 bottom-0 bg-yellow-500",children:(0,w.jsx)("p",{className:"font-bold text-white",children:"B\u1ea1n \u0111ang xem \u1edf ch\u1ebf \u0111\u1ed9 xem tr\u01b0\u1edbc, h\xe3y b\u1eaft \u0111\u1ea7u \xf4n thi n\xe0o!!!"})})]})})]})})};return(0,w.jsx)("div",{className:"w-full",children:N.isLoading?(0,w.jsx)(A.A,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b,{quizDetail:N.data}),(0,w.jsxs)("div",{className:"px-2 py-2 mt-5 rounded shadow-md border bg-white",children:[(0,w.jsx)("div",{className:"flex gap-3 flex-wrap",children:E.map((e=>(0,w.jsxs)("button",{className:(q===e.key?"border-b-4 border-b-primary text-primary cursor-default":"hover:opacity-50 cursor-pointer border-b-4 border-b-white")+" flex flex-wrap tabButtons-center text-lg pb-2 px-1 transition-all duration-200 ease-linear text-gray-500 items-center",onClick:()=>z(e.key),children:[(0,w.jsx)(i.g,{className:"block",icon:e.icon}),(0,w.jsx)("p",{className:"pl-2",children:e.label})]},e.key)))}),(0,w.jsx)("div",{className:"mt-6",children:L[q]})]})]})})}},9519:(e,t,s)=>{"use strict";s.d(t,{hG:()=>c,wn:()=>l,hj:()=>m,Wk:()=>f,h3:()=>o,iC:()=>v,mU:()=>h,qY:()=>r,J7:()=>d,z1:()=>u});var i=s(3491),n=s(307);const a=s(9246).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),r=async e=>{try{const s=new URLSearchParams;Object.entries(e).forEach((e=>{let[t,i]=e;void 0!=i&&s.append(t,String(i))}));const i=await n.A.get(`/quiz/mine?${s}`);var t;return 200===i.status&&i.data&&(null!==(t=i.data.data)&&void 0!==t)?t:[]}catch(i){var s;if(console.log(i),i.response)throw new Error(null===(s=i.response)||void 0===s?void 0:s.data)}},o=async e=>{try{const t=await n.A.get(`/quiz/detail?id=${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},l=async e=>{try{const{name:t,description:s,school:i,subject:a,topic:r,schoolYear:o,educationLevel:l,thumb:c}=e,d=await n.A.post("/quiz/create",JSON.stringify({name:t,description:s,school:i,subject:a,topic:r,schoolYear:o,educationLevel:l,thumb:c}));return 200===d.status&&d.data?d.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},c=async e=>{try{const{id:t,partName:s,questionType:i,questionContent:a,answers:r}=e,o=await n.A.put("/quiz/createQuestion",JSON.stringify({id:t,partName:s,questionType:i,questionContent:a,answers:r}));return 200===o.status&&o.data?o.data.data:{}}catch(t){if(t.response)throw i.Ay.error(t.response.data),new Error(t.response.data)}},d=async e=>{try{const t=await n.A.put("/quiz/updateGeneralInfo",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:{}}catch(t){if(t.response)throw i.Ay.error(t.response.data),new Error(t.response.data)}},u=async e=>{try{const t=await n.A.put("/quiz/updateQuestion",JSON.stringify(e));return 200===t.status&&t.data?t.data.data:t}catch(t){if(t.response)throw console.log(t.response),new Error(t.response.data)}},h=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await a.get(`/quiz/preview/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},v=async e=>{try{if(!e)throw new Error("L\u1ed7i");const t=await n.A.get(`/quiz/forExam/${e}`);return 200===t.status&&t.data?t.data.data:{}}catch(t){throw new Error(t.response.data)}},m=async e=>{try{const{id:t}=e;if(!t)throw new Error("C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh x\xf3a");const s=await n.A.delete(`/quiz/${t}/deleteQuiz`);return 200===s.status&&s.data?s.data.data:{}}catch(t){if(t.response)throw new Error(t.response.data)}},f=async e=>{try{const{name:t,page:s,limit:i,skip:n,subject:r,topic:o,schoolYear:l,educationLevel:c}=e,d=new URLSearchParams;Object.entries({name:t,page:s,limit:i,skip:n,subject:r,topic:o,schoolYear:l,educationLevel:c}).forEach((e=>{let[t,s]=e;void 0!==s&&d.append(t,String(s))}));const u=await a.get(`/quiz/discovery?${d}`);return 200===u.status&&u.data?u.data.data:[]}catch(t){throw new Error(t.response.data)}}},9646:function(e){!function(t,s){var i={version:"2.14.4",areas:{},apis:{},nsdelim:".",inherit:function(e,t){for(var s in e)t.hasOwnProperty(s)||Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s));return t},stringify:function(e,t){return void 0===e||"function"===typeof e?e+"":JSON.stringify(e,t||i.replace)},parse:function(e,t){try{return JSON.parse(e,t||i.revive)}catch(s){return e}},fn:function(e,t){for(var s in i.storeAPI[e]=t,i.apis)i.apis[s][e]=t},get:function(e,t){return e.getItem(t)},set:function(e,t,s){e.setItem(t,s)},remove:function(e,t){e.removeItem(t)},key:function(e,t){return e.key(t)},length:function(e){return e.length},clear:function(e){e.clear()},Store:function(e,t,s){var n=i.inherit(i.storeAPI,(function(e,t,s){return 0===arguments.length?n.getAll():"function"===typeof t?n.transact(e,t,s):void 0!==t?n.set(e,t,s):"string"===typeof e||"number"===typeof e?n.get(e):"function"===typeof e?n.each(e):e?n.setAll(e,t):n.clear()}));n._id=e;try{var a="__store2_test";t.setItem(a,"ok"),n._area=t,t.removeItem(a)}catch(r){n._area=i.storage("fake")}return n._ns=s||"",i.areas[e]||(i.areas[e]=n._area),i.apis[n._ns+n._id]||(i.apis[n._ns+n._id]=n),n},storeAPI:{area:function(e,t){var s=this[e];return s&&s.area||(s=i.Store(e,t,this._ns),this[e]||(this[e]=s)),s},namespace:function(e,t,s){if(s=s||this._delim||i.nsdelim,!e)return this._ns?this._ns.substring(0,this._ns.length-s.length):"";var n=e,a=this[n];if((!a||!a.namespace)&&((a=i.Store(this._id,this._area,this._ns+n+s))._delim=s,this[n]||(this[n]=a),!t))for(var r in i.areas)a.area(r,i.areas[r]);return a},isFake:function(e){return e?(this._real=this._area,this._area=i.storage("fake")):!1===e&&(this._area=this._real||this._area),"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(e){return this._area.has?this._area.has(this._in(e)):!!(this._in(e)in this._area)},size:function(){return this.keys().length},each:function(e,t){for(var s=0,n=i.length(this._area);s<n;s++){var a=this._out(i.key(this._area,s));if(void 0!==a&&!1===e.call(this,a,this.get(a),t))break;n>i.length(this._area)&&(n--,s--)}return t||this},keys:function(e){return this.each((function(e,t,s){s.push(e)}),e||[])},get:function(e,t){var s,n=i.get(this._area,this._in(e));return"function"===typeof t&&(s=t,t=null),null!==n?i.parse(n,s):null!=t?t:n},getAll:function(e){return this.each((function(e,t,s){s[e]=t}),e||{})},transact:function(e,t,s){var i=this.get(e,s),n=t(i);return this.set(e,void 0===n?i:n),this},set:function(e,t,s){var n,a=this.get(e);return null!=a&&!1===s?t:("function"===typeof s&&(n=s,s=void 0),i.set(this._area,this._in(e),i.stringify(t,n),s)||a)},setAll:function(e,t){var s,i;for(var n in e)i=e[n],this.set(n,i,t)!==i&&(s=!0);return s},add:function(e,t,s){var n=this.get(e);if(n instanceof Array)t=n.concat(t);else if(null!==n){var a=typeof n;if(a===typeof t&&"object"===a){for(var r in t)n[r]=t[r];t=n}else t=n+t}return i.set(this._area,this._in(e),i.stringify(t,s)),t},remove:function(e,t){var s=this.get(e,t);return i.remove(this._area,this._in(e)),s},clear:function(){return this._ns?this.each((function(e){i.remove(this._area,this._in(e))}),1):i.clear(this._area),this},clearAll:function(){var e=this._area;for(var t in i.areas)i.areas.hasOwnProperty(t)&&(this._area=i.areas[t],this.clear());return this._area=e,this},_in:function(e){return"string"!==typeof e&&(e=i.stringify(e)),this._ns?this._ns+e:e},_out:function(e){return this._ns?e&&0===e.indexOf(this._ns)?e.substring(this._ns.length):void 0:e}},storage:function(e){return i.inherit(i.storageAPI,{items:{},name:e})},storageAPI:{length:0,has:function(e){return this.items.hasOwnProperty(e)},key:function(e){var t=0;for(var s in this.items)if(this.has(s)&&e===t++)return s},setItem:function(e,t){this.has(e)||this.length++,this.items[e]=t},removeItem:function(e){this.has(e)&&(delete this.items[e],this.length--)},getItem:function(e){return this.has(e)?this.items[e]:null},clear:function(){for(var e in this.items)this.removeItem(e)}}},n=i.Store("local",function(){try{return localStorage}catch(e){}}());n.local=n,n._=i,n.area("session",function(){try{return sessionStorage}catch(e){}}()),n.area("page",i.storage("page")),"function"===typeof s&&void 0!==s.amd?s("store2",[],(function(){return n})):e.exports?e.exports=n:(t.store&&(i.conflict=t.store),t.store=n)}(this,this&&this.define)}}]);